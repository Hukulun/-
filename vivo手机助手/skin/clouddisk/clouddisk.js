$(document).ready(function(){$.event.props=$.event.props.join("|").replace("layerX|layerY|","").split("|");global.contentObj=$("#content");global.loginIframeObj=$("#loginIframe");getConnenctedState();$(".category").click(function(){var c=$(this).attr("id");var a;if(!$(this).hasClass("category-selected")){$(".category").removeClass("slideDown category-selected");if($(this).parent().hasClass("cate_group")){var b=$(this).parent().attr("id");$(".cate_group:not(#"+b+")").slideUp()}else{$(".cate_group").slideUp()}$(this).addClass("slideDown category-selected");$(this).nextUntil("div").filter(".cate_group").slideDown();a=false}else{$(this).nextUntil("div").filter(".cate_group").slideToggle();$(this).hasClass("slideDown")?$(this).removeClass("slideDown"):$(this).addClass("slideDown");a=true}if(c=="fileManager"){if($(this).parent().prev().hasClass("category")){$(this).parent().prev().addClass("slideDown category-selected")}showGivenIframe(c);$(".category-list").removeClass("category-list-click")}else{if(c=="fileFilter"){if($(this).parent().prev().hasClass("category")){$(this).parent().prev().addClass("slideDown category-selected")}if(!a){$("#filePic").click()}}else{if(c=="phoneBackup"){if(!$("#"+global.phoneBackupPreCate).hasClass("category-list-click")){$(".category-list").removeClass("category-list-click");$("#"+global.phoneBackupPreCate).addClass("category-list-click")}showGivenIframe(global.phoneBackupPreCate)}else{if(c=="fileClound"){if(!a){$("#fileManager").click()}}else{showGivenIframe(c)}}}}});$(".category-list").click(function(){var a=$(this);$(".category-list").removeClass("category-list-click");a.addClass("category-list-click");$(".category").css("background-position-y","0px");global.cateName="vivo云盘 >  "+a.find("span").text();var b=$(this).attr("id");showGivenIframe(b)});$(".close").mouseup(function(){$(this).css("background-position-x","0px");$("#installAppPop").hide()});$(".submitButton").mousedown(function(){if($(this).hasClass("disable")){return}}).mouseup(function(){if($(this).hasClass("disable")){return}var a=$(this).text();if(a=="取消"){$("#installAppPop").hide()}else{}})});document.oncontextmenu=new Function("return false;");var global={contentObj:"",loginIframeObj:"",cateName:"vivo云盘文件管理",userName:"",password:"",remember:0,importNum:0,nowOpenCate:"contact",phoneBackupPreCate:"contact",fileManagerPreCate:"fileManager",currentPath:"/apps/BBKCloud/",romVersion:0,bConnected:0};function setContactsList(a){if(typeof a==="string"){a=JSON.parse(a)}contactIframe.window.setContactsList(a)}function setSearchContacts(a){contactIframe.window.setSearchContacts(a)}function iframeContactRefresh(){cef.cloud("contactRefresh")}function setContactDetail(a){contactIframe.window.setContactDetail(a)}function iframeSaveContacts(a){cef.param=a;cef.cloud("saveContacts")}function iframeImportContacts2Phone(a,b){art.dialog({id:"processDlg",title:"导入联系人",cancelValue:"取消",width:"300px",initialize:function(){this.content(document.getElementById("processScript").innerHTML);document.getElementById("nCnt").innerHTML=b;cef.param=a;cef.cloud("importContacts2Phone")},cancel:function(){cef.cloud("cancelContactImport");return true},focus:true,dblclickNotHide:true,lock:true})}function iframeSetContactNum(b){var a="("+b+")";document.getElementById("contactNum").innerText=a}function setImportProgress(b){if(b==-1){$(".processTxt").append('<label class="d-over-tip">联系人导入完成</label>');setTimeout(function(){CloseArtDialog()},1000);return}var a=parseInt($("#nCnt").text(),10);$("#nDone").text(b);$("#process").css("width",b/a*230)}function setContactSortLetter(a){contactIframe.window.setContactSortLetter(a)}function loginOk(){cef.param='[{"userName":"'+global.userName+'" , "password":"'+global.password+'","remember":"'+global.remember+'"}]';cef.cloud("setCookie");document.getElementById("userName").innerText=global.userName;$(".category-list").removeClass("category-list-click");$("#contact").addClass("category-list-click");global.phoneBackupPreCate="contact";$("#phoneBackup").click()}function exit(){$(".category-selected").click();document.getElementById("content").innerHTML="";global.loginIframeObj.show();loginIframe.window.init();cef.cloud("logout")}function login(a){cef.param=a;cef.cloud("login")}function loginSuccess(a){loginIframe.window.loginSuccess(a)}function registerUser(a){cef.param=a;cef.cloud("register")}function registerSuccess(a){loginIframe.window.registerSuccess(a)}function checkUserName(a){cef.param=a;cef.cloud("checkUserName")}function checkUserNameSuccess(a){loginIframe.window.checkUserNameSuccess(a)}function checkEmail(a){cef.param=a;cef.cloud("checkEmail")}function checkEmailSuccess(a){loginIframe.window.checkEmailSuccess(a)}function findPass(a){cef.param=a;cef.cloud("findPass")}function findPassSuccess(a){loginIframe.window.findPassSuccess(a)}function getCookie(){cef.cloud("getCookie")}function getCookieSuccess(a){loginIframe.window.getCookieSuccess(a)}function connectFail(){art.dialog({title:"提示",okValue:"确定",width:"300px",initialize:function(){this.content("无法与服务器建立连接，请检查网络或服务器设置")},ok:function(){return true},focus:true,dblclickNotHide:true,lock:true})}function setSideInfo(b){if(typeof(b)=="string"){b=JSON.parse(b)}var c=b.count;var a=c.split("|");$("#contactNum").text("("+a[0]+")");$("#messageNum").text("("+a[2]+")");$("#bookmarkNum").text("("+a[4]+")");$("#blacklistNum").text("("+a[6]+")");$("#noteNum").text("("+a[8]+")");var d=b.rom_version;d=d.replace(/^rom_/,"");d=d.replace(/\./,"");if(d==""){d=0}else{d=parseInt(d)}global.romVersion=d}function openBrowser(a){cef.param=a;cef.cloud("openBrowser")}function bookmarkRefresh(){cef.cloud("bookmarkRefresh")}function getBookmarkSuccess(a){bookmarkIframe.window.getBookmarkSuccess(a)}function searchBookmarkSuccess(a){bookmarkIframe.window.searchBookmarkSuccess(a)}function importBookmark2Phone(a,b){art.dialog({id:"processDlg",title:"导入浏览器书签",cancelValue:"取消",width:"300px",initialize:function(){this.content(document.getElementById("processScript").innerHTML);document.getElementById("nCnt").innerHTML=b;cef.param=a;cef.cloud("importBookmark2Phone")},cancel:function(){cef.cloud("stop");return true},focus:true,dblclickNotHide:true,lock:true})}function importSuccess(b){if(b==-1){$(".processTxt").append('<label class="d-over-tip">浏览器书签导入完成</label>');setTimeout(function(){CloseArtDialog()},1000);return}var a=parseInt($("#nCnt").text(),10);$("#nDone").text(b);$("#process").css("width",b/a*230)}function exportBookmark2Com(a){cef.param=a;cef.cloud("exportBookmark2Com")}function nowExportBookmark(){document.getElementById("bubble_message").innerHTML='<div class="bubble_text"><div class="refresh" ></div>正在保存浏览器书签，请稍候...</div>';document.getElementById("bubble").style.display="block"}function exportBookmarkSuccess(a){if(a=="0"){document.getElementById("bubble_message").innerHTML='<div class="bubble_text"><div class="sorry" ></div>浏览器书签保存失败！</div>'}else{document.getElementById("bubble_message").innerHTML='<div class="bubble_text"><div class="ok" ></div>浏览器书签保存成功！</div>'}setTimeout(function(){document.getElementById("bubble").style.display="none"},2000)}function nowExportContact(){document.getElementById("bubble_message").innerHTML='<div class="bubble_text"><div class="refresh" ></div>正在保存所选联系人，请稍候...</div>';document.getElementById("bubble").style.display="block"}function exportContactSuccess(a){if(a=="0"){document.getElementById("bubble_message").innerHTML='<div class="bubble_text"><div class="sorry" ></div>联系人保存失败！</div>'}else{document.getElementById("bubble_message").innerHTML='<div class="bubble_text"><div class="ok" ></div>联系人保存成功！</div>'}setTimeout(function(){document.getElementById("bubble").style.display="none"},2000)}function checkConnectPhone(){cef.param=global.nowOpenCate;cef.cloud("checkConnectPhone");return cef.param}function onConnected(a){if(typeof(a)=="string"){a=JSON.parse(a)}contactIframe.window.connectSuccess();if($("#bookmarkIframe").length>0){bookmarkIframe.window.connectSuccess()}if($("#messageIframe").length>0){messageIframe.window.connectSuccess()}var c=a.rom_version;c=c.replace(/^rom_/,"");c=c.replace(/\./,"");if(c==""){c=0}else{c=parseInt(c)}global.romVersion=c;var b=a.connected;global.bConnected=b;if($("#noteIframe").length>0){noteIframe.window.onConnected(b)}if($("#blacklistIframe").length>0){blacklistIframe.window.onConnected(b)}}function executeCmessCFun(a){cef.param=a;cef.cloud("executeCmessCFun")}function executeCmessUIFun(a){if(a==null||a==""){return}var b=a[0]["CMessUIFun"];if(b=="fillCMessContent"){messageIframe.window.fillCMessContent(a)}else{if(b=="setImportMessTotal"){setImportMessTotal(a)}else{if(b=="importMessSuccess"){importMessSuccess(a)}else{if(b=="exportMessSuccess"){exportMessSuccess(a)}else{if(b=="nowExportMess"){nowExportMess()}}}}}}function setImportMessTotal(a){var b=a[0]["param"];art.dialog({id:"processDlg",title:"导入信息",cancelValue:"取消",width:"300px",initialize:function(){this.content(document.getElementById("processScript").innerHTML);document.getElementById("nCnt").innerHTML=b},cancel:function(){cef.cloud("stop");return true},focus:true,dblclickNotHide:true,lock:true})}function importMessSuccess(a){var c=a[0]["param"];if(c==-1){$(".processTxt").append('<label class="d-over-tip">信息导入完成</label>');setTimeout(function(){CloseArtDialog()},1000);return}var b=parseInt($("#nCnt").text(),10);$("#nDone").text(c);$("#process").css("width",c/b*230)}function nowExportMess(){document.getElementById("bubble_message").innerHTML='<div class="bubble_text"><div class="refresh" ></div>正在保存信息，请稍候...</div>';document.getElementById("bubble").style.display="block"}function exportMessSuccess(a){var b=a[0]["param"];if(b=="0"){document.getElementById("bubble_message").innerHTML='<div class="bubble_text"><div class="sorry" ></div>信息保存失败！</div>'}else{document.getElementById("bubble_message").innerHTML='<div class="bubble_text"><div class="ok" ></div>信息保存成功！</div>'}setTimeout(function(){document.getElementById("bubble").style.display="none"},2000)}function setCmessLoadingText(a){messageIframe.window.setLoadingText(a)}function setContactLoadingText(a){contactIframe.window.setLoadingText(a)}function showBaiduPcsAuth(a){global.loginIframeObj.show();loginIframe.window.showBaiduPcsAuth(a)}function showGivenIframe(b){if(b=="contact"){global.phoneBackupPreCate="contact";global.contentObj.find("iframe").css("display","none");var a=global.contentObj.find("#contactIframe");if(a.length==0){global.contentObj.append('<iframe name="contactIframe" id="contactIframe" src="phone/contact/contact.html"></iframe>')}a.show()}else{if(b=="message"){global.phoneBackupPreCate="message";global.contentObj.find("iframe").css("display","none");var a=global.contentObj.find("#messageIframe");if(a.length==0){global.contentObj.append('<iframe name="messageIframe" id="messageIframe" src="phone/cMessage/cMessage.html"></iframe>')}a.show()}else{if(b=="bookmark"){global.phoneBackupPreCate="bookmark";global.contentObj.find("iframe").css("display","none");var a=global.contentObj.find("#bookmarkIframe");if(a.length==0){global.contentObj.append('<iframe name="bookmarkIframe" id="bookmarkIframe" src="phone/bookmark/bookmark.html"></iframe>')}a.show()}else{if(b=="blcaklist"){global.phoneBackupPreCate="blcaklist";global.contentObj.find("iframe").css("display","none");var a=global.contentObj.find("#blacklistIframe");if(a.length==0){global.contentObj.append('<iframe name="blacklistIframe" id="blacklistIframe" src="phone/blacklist/blacklist.html"></iframe>')}a.show()}else{if(b=="note"){global.phoneBackupPreCate="note";global.contentObj.find("iframe").css("display","none");var a=global.contentObj.find("#noteIframe");if(a.length==0){global.contentObj.append('<iframe name="noteIframe" id="noteIframe" src="phone/note/note.html"></iframe>')}a.show()}else{if(b=="fileManager"){global.cateName="vivo云盘 >  文件管理";global.fileManagerPreCate="fileManager";global.currentPath="/apps/BBKCloud/";global.contentObj.find("iframe").css("display","none");var a=global.contentObj.find("#fileManagerIframe");if(a.length==0){global.contentObj.append('<iframe name="fileManagerIframe" id="fileManagerIframe" src="file/file.html"></iframe>')}a.show()}else{if(b=="filePic"){global.cateName="vivo云盘 >  图片";global.fileManagerPreCate="filePic";global.contentObj.find("iframe").css("display","none");var a=global.contentObj.find("#filePicIframe");if(a.length==0){global.contentObj.append('<iframe name="filePicIframe" id="filePicIframe" src="file/image.html"></iframe>')}a.show()}else{if(b=="fileDoc"){global.fileManagerPreCate="fileDoc";global.contentObj.find("iframe").css("display","none");var a=global.contentObj.find("#fileDocIframe");if(a.length==0){global.contentObj.append('<iframe name="fileDocIframe" id="fileDocIframe" src="file/doc.html"></iframe>')}a.show()}else{if(b=="fileMusic"){global.fileManagerPreCate="fileMusic";global.contentObj.find("iframe").css("display","none");var a=global.contentObj.find("#fileMusicIframe");if(a.length==0){global.contentObj.append('<iframe name="fileMusicIframe" id="fileMusicIframe" src="file/audio.html"></iframe>')}a.show()}else{if(b=="fileMovie"){global.fileManagerPreCate="fileMovie";global.contentObj.find("iframe").css("display","none");var a=global.contentObj.find("#fileMovieIframe");if(a.length==0){global.contentObj.append('<iframe name="fileMovieIframe" id="fileMovieIframe" src="file/video.html"></iframe>')}a.show()}else{if(b=="fileApp"){global.fileManagerPreCate="fileApp";global.contentObj.find("iframe").css("display","none");var a=global.contentObj.find("#fileAppIframe");if(a.length==0){global.contentObj.append('<iframe name="fileAppIframe" id="fileAppIframe" src="file/file.html"></iframe>')}a.show()}else{if(b=="share"){global.cateName="vivo文件分享";global.contentObj.find("iframe").css("display","none");var a=global.contentObj.find("#shareIframe");if(a.length==0){global.contentObj.append('<iframe name="shareIframe" id="shareIframe" src="file/file.html"></iframe>')}a.show()}else{if(b=="recycle"){global.cateName="vivo文件回收站";global.contentObj.find("iframe").css("display","none");var a=global.contentObj.find("#recycleIframe");if(a.length==0){global.contentObj.append('<iframe name="recycleIframe" id="recycleIframe" src="file/file.html"></iframe>')}a.show()}else{global.contentObj.find("iframe").css("display","none")}}}}}}}}}}}}}}function updateQuotaSpace(a){var d=a[0]["quota"];var b=a[0]["used"];var c=a[0]["percent"];console.log("quota:"+d);if(d=="0"){hideDiskInfo()}else{showDiskInfo();c=parseInt(100*c);if(c<1){c=1}$("#diskFill").width(c+"%");$("#diskStatus").text(b+"/"+d)}}function showFileList(a){var c=a[0]["path"];var b=a[0]["jsonParam"];if(global.fileManagerPreCate=="fileManager"&&c.indexOf("BBKCloud")!=-1){fileManagerIframe.window.showFileList(b)}else{if(global.fileManagerPreCate=="filePic"&&c=="image"){filePicIframe.window.showFileList(b)}else{if(global.fileManagerPreCate=="fileDoc"&&c=="doc"){fileDocIframe.window.showFileList(b)}else{if(global.fileManagerPreCate=="fileMusic"&&c=="audio"){fileMusicIframe.window.showFileList(b)}else{if(global.fileManagerPreCate=="fileMovie"&&c=="video"){fileMovieIframe.window.showFileList(b)}else{if(global.fileManagerPreCate=="fileApp"){fileAppIframe.window.showFileList(b)}else{if(global.fileManagerPreCate=="share"){shareIframe.window.showFileList(b)}else{if(global.fileManagerPreCate=="recycle"){recycleIframe.window.showFileList(b)}else{}}}}}}}}}function createDirOver(a){if(global.fileManagerPreCate=="fileManager"){fileManagerIframe.window.createDirOver(a)}}function uploadingFileBegin(a){if(global.fileManagerPreCate=="fileManager"){fileManagerIframe.window.uploadingFileBegin(a)}else{if(global.fileManagerPreCate=="filePic"){filePicIframe.window.uploadingFileBegin(a)}else{if(global.fileManagerPreCate=="fileDoc"){fileDocIframe.window.uploadingFileBegin(a)}else{if(global.fileManagerPreCate=="fileMusic"){fileMusicIframe.window.uploadingFileBegin(a)}else{if(global.fileManagerPreCate=="fileMovie"){fileMovieIframe.window.uploadingFileBegin(a)}else{if(global.fileManagerPreCate=="fileApp"){fileAppIframe.window.uploadingFileBegin(a)}else{if(global.fileManagerPreCate=="share"){shareIframe.window.uploadingFileBegin(a)}else{if(global.fileManagerPreCate=="recycle"){recycleIframe.window.uploadingFileBegin(a)}else{}}}}}}}}}function downloadingFileBegin(a){if(global.fileManagerPreCate=="fileManager"){fileManagerIframe.window.downloadingFileBegin(a)}else{if(global.fileManagerPreCate=="filePic"){filePicIframe.window.downloadingFileBegin(a)}else{if(global.fileManagerPreCate=="fileDoc"){fileDocIframe.window.downloadingFileBegin(a)}else{if(global.fileManagerPreCate=="fileMusic"){fileMusicIframe.window.downloadingFileBegin(a)}else{if(global.fileManagerPreCate=="fileMovie"){fileMovieIframe.window.downloadingFileBegin(a)}else{if(global.fileManagerPreCate=="fileApp"){fileAppIframe.window.downloadingFileBegin(a)}else{if(global.fileManagerPreCate=="share"){shareIframe.window.downloadingFileBegin(a)}else{if(global.fileManagerPreCate=="recycle"){recycleIframe.window.downloadingFileBegin(a)}else{}}}}}}}}}function deleteFilesBegin(a){if(global.fileManagerPreCate=="fileManager"){fileManagerIframe.window.deleteFilesBegin(a)}else{if(global.fileManagerPreCate=="filePic"){filePicIframe.window.deleteFilesBegin(a)}else{if(global.fileManagerPreCate=="fileDoc"){fileDocIframe.window.deleteFilesBegin(a)}else{if(global.fileManagerPreCate=="fileMusic"){fileMusicIframe.window.deleteFilesBegin(a)}else{if(global.fileManagerPreCate=="fileMovie"){fileMovieIframe.window.deleteFilesBegin(a)}else{if(global.fileManagerPreCate=="fileApp"){fileAppIframe.window.deleteFilesBegin(a)}else{if(global.fileManagerPreCate=="share"){shareIframe.window.deleteFilesBegin(a)}else{if(global.fileManagerPreCate=="recycle"){recycleIframe.window.deleteFilesBegin(a)}else{}}}}}}}}}function deleteFilesOver(a){if(global.fileManagerPreCate=="fileManager"){fileManagerIframe.window.deleteFilesOver(a)}else{if(global.fileManagerPreCate=="filePic"){filePicIframe.window.deleteFilesOver(a)}else{if(global.fileManagerPreCate=="fileDoc"){fileDocIframe.window.deleteFilesOver(a)}else{if(global.fileManagerPreCate=="fileMusic"){fileMusicIframe.window.deleteFilesOver(a)}else{if(global.fileManagerPreCate=="fileMovie"){fileMovieIframe.window.deleteFilesOver(a)}else{if(global.fileManagerPreCate=="fileApp"){fileAppIframe.window.deleteFilesOver(a)}else{if(global.fileManagerPreCate=="share"){shareIframe.window.deleteFilesOver(a)}else{if(global.fileManagerPreCate=="recycle"){recycleIframe.window.deleteFilesOver(a)}else{}}}}}}}}}function postFileOver(a){if(global.fileManagerPreCate=="fileManager"){fileManagerIframe.window.postFileOver(a)}}function showSearchResult(a){fileManagerIframe.window.showSearchResult(a)}function CloseArtDialog(){var a=art.dialog.get();for(var b in a){a[b].close()}}function hideDiskInfo(){console.log("hideDiskInfo");$(".userStatus .disk").hide();$(".userStatus .diskStatus").hide();$("#fileClound").hide();$(".userStatus").css({height:"30px"})}function showDiskInfo(){console.log("showDiskInfo");$(".userStatus .disk").show();$(".userStatus .diskStatus").show();$("#fileClound").show();$(".userStatus").css({height:"60px"})}function showImportProcess(b,a){art.dialog({id:b,title:a,cancelValue:"取消",width:"300px",initialize:function(){this.content(document.getElementById("processScript").innerHTML)},cancel:function(){cancelImport(b);return false},focus:true,dblclickNotHide:true,lock:true})}function setProcess(b){console.log(b);var c=b.index+1;var a=b.count;var d=b.id;console.log(JSON.stringify(b));$("#nDone").text(c);$("#nCnt").text(a);if(c!=0){$("#process").css("width",parseInt(c)/parseInt(a)*230)}else{$("#process").css("width",0*230)}}function onImportFinish(a){var d=a.id;var b=a.error;if(b==0){$(".processTxt").append('<label class="d-over-tip">完成</label>')}else{$(".processTxt").append('<label class="d-error-tip" style="color:#818181">部分内容导入失败!请刷新数据后重试</label>')}var c=art.dialog.get();setTimeout(function(){$("#process").css("width",0*230);c[d].close()},1000)}function cancelImport(a){$(".processTxt").html('<label class="d-error-tip" style="color:#818181" >正在取消</label>');$.ajax({url:"http://clouddisk/importCancel",type:"POST",data:a,success:function(){},error:function(){},complete:function(){}})}function getRomVersion(){return global.romVersion}function setBlacklistCount(a){$("#blacklistNum").text("("+a+")")}function setNoteCount(a){$("#noteNum").text("("+a+")")}function getConnenctedState(){$.ajax({url:"http://clouddisk/getConnectedState",type:"GET",success:function(a){if(typeof(a)=="string"){a=JSON.parse(a)}var c=a.rom_version;c=c.replace(/^rom_/,"");c=c.replace(/\./,"");if(c==""){c=0}else{c=parseInt(c)}global.romVersion=c;var b=a.connected;global.bConnected=b},error:function(){},complete:function(){}})};