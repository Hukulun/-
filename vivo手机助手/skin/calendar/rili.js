var lunarInfo=new Array(19416,19168,42352,21717,53856,55632,21844,22191,39632,21970,19168,42422,42192,53840,53845,46415,54944,44450,38320,18807,18815,42160,46261,27216,27968,43860,11119,38256,21234,18800,25958,54432,59984,27285,23263,11104,34531,37615,51415,51551,54432,55462,46431,22176,42420,9695,37584,53938,43344,46423,27808,46416,21333,19887,42416,17779,21183,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,38310,38335,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,20854,21183,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,53430,53855,54560,56645,46496,22224,21938,18864,42359,42160,43600,45653,27951,44448,19299,37759,18936,18800,25776,26790,59999,27424,42692,43759,37600,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,19285,19311,42352,21732,53856,59752,54560,55968,27302,22239,19168,43476,42192,53584,62034,54560);var solarMonth=new Array(31,28,31,30,31,30,31,31,30,31,30,31);var Gan=new Array("甲","乙","丙","丁","戊","己","庚","辛","壬","癸");var Zhi=new Array("子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥");var Animals=new Array("鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪");var solarTerm=new Array("小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至");var sTermInfo=new Array(0,21208,42467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758);var nStr1=new Array("日","一","二","三","四","五","六","七","八","九","十");var nStr2=new Array("初","十","廿","卅"," ");var jcName0=new Array("建","除","满","平","定","执","破","危","成","收","开","闭");var jcName1=new Array("闭","建","除","满","平","定","执","破","危","成","收","开");var jcName2=new Array("开","闭","建","除","满","平","定","执","破","危","成","收");var jcName3=new Array("收","开","闭","建","除","满","平","定","执","破","危","成");var jcName4=new Array("成","收","开","闭","建","除","满","平","定","执","破","危");var jcName5=new Array("危","成","收","开","闭","建","除","满","平","定","执","破");var jcName6=new Array("破","危","成","收","开","闭","建","除","满","平","定","执");var jcName7=new Array("执","破","危","成","收","开","闭","建","除","满","平","定");var jcName8=new Array("定","执","破","危","成","收","开","闭","建","除","满","平");var jcName9=new Array("平","定","执","破","危","成","收","开","闭","建","除","满");var jcName10=new Array("满","平","定","执","破","危","成","收","开","闭","建","除");var jcName11=new Array("除","满","平","定","执","破","危","成","收","开","闭","建");function jcr(b){var a;if(b=="建"){a='<div class="yi">出行.上任.会友.上书.见工</div><div class="ji">动土.开仓.嫁娶.纳采</div>'}if(b=="除"){a='<div class="yi">除服.疗病.出行.拆卸.入宅</div><div class="ji">求官.上任.开张.搬家.探病</div>'}if(b=="满"){a='<div class="yi">祈福.祭祀.结亲.开市.交易</div><div class="ji">服药.求医.栽种.动土.迁移</div>'}if(b=="平"){a='<div class="yi">祭祀.修填.涂泥.余事勿取</div><div class="ji">移徙.入宅.嫁娶.开市.安葬</div>'}if(b=="定"){a='<div class="yi">易.立券.会友.签约.纳畜</div><div class="ji">种植.置业.卖田.掘井.造船</div>'}if(b=="执"){a='<div class="yi">祈福.祭祀.求子.结婚.立约</div><div class="ji">开市.交易.搬家.远行</div>'}if(b=="破"){a='<div class="yi">求医.赴考.祭祀.余事勿取</div><div class="ji">动土.出行.移徙.开市.修造</div>'}if(b=="危"){a='<div class="yi">经营.交易.求官.纳畜.动土</div><div class="ji">登高.行船.安床.入宅.博彩</div>'}if(b=="成"){a='<div class="yi">祈福.入学.开市.求医.成服</div><div class="ji">词讼.安门.移徙</div>'}if(b=="收"){a='<div class="yi">祭祀.求财.签约.嫁娶.订盟</div><div class="ji">开市.安床.安葬.入宅.破土</div>'}if(b=="开"){a='<div class="yi">疗病.结婚.交易.入仓.求职</div><div class="ji">安葬.动土.针灸</div>'}if(b=="闭"){a='<div class="yi">祭祀.交易.收财.安葬</div><div class="ji">宴会.安床.出行.嫁娶.移徙</div>'}return(a)}var sFtv=new Array("0101-元旦","0214  情人节","0308  妇女节","0312  植树节","0401  愚人节","0422  地球日","0501*劳动节","0504  青年节","0601  儿童节","0605  环境日","0701  建党节","0801  建军节","0903  胜利日","0910  教师节","1001*国庆节","1101  万圣节","1224  平安夜","1225  圣诞节");var lFtv=new Array("0101*春节","0102*大年初二","0103*大年初三","0115  元宵节","0202  龙抬头","0408  佛诞节 ","0505*端午节","0606  天贶节","0624  彝族火把节","0707  七夕情人节","0714  鬼节(南方)","0715  盂兰节","0730  地藏节","0815*中秋节","0909  重阳节","1001  祭祖节","1208  腊八节","1223  过小年","0100*除夕");var wFtv=new Array("0520  母亲节","0530  全国助残日","0630  父亲节","1144  感恩节");function lYearDays(c){var a,b=348;for(a=32768;a>8;a>>=1){b+=(lunarInfo[c-1900]&a)?1:0}return(b+leapDays(c))}function leapDays(a){if(leapMonth(a)){return((lunarInfo[a-1899]&15)==15?30:29)}else{return(0)}}function leapMonth(b){var a=lunarInfo[b-1900]&15;return(a==15?0:a)}function monthDays(b,a){return((lunarInfo[b-1900]&(65536>>a))?30:29)}function Lunar(d){var c,b=0,a=0;var e=(Date.UTC(d.getFullYear(),d.getMonth(),d.getDate())-Date.UTC(1900,0,31))/86400000;for(c=1900;c<2100&&e>0;c++){a=lYearDays(c);e-=a}if(e<0){e+=a;c--}this.year=c;b=leapMonth(c);this.isLeap=false;for(c=1;c<13&&e>0;c++){if(b>0&&c==(b+1)&&this.isLeap==false){--c;this.isLeap=true;a=leapDays(this.year)}else{a=monthDays(this.year,c)}if(this.isLeap==true&&c==(b+1)){this.isLeap=false}e-=a}if(e==0&&b>0&&c==b+1){if(this.isLeap){this.isLeap=false}else{this.isLeap=true;--c}}if(e<0){e+=a;--c}this.month=c;this.day=e+1}function solarDays(b,a){if(a==1){return(((b%4==0)&&(b%100!=0)||(b%400==0))?29:28)}else{return(solarMonth[a])}}function cyclical(a){return(Gan[a%10]+Zhi[a%12])}function calElement(a,g,k,b,f,d,e,h,c,j,l){this.isToday=false;this.sYear=a;this.sMonth=g;this.sDay=k;this.week=b;this.lYear=f;this.lMonth=d;this.lDay=e;this.isLeap=h;this.cYear=c;this.cMonth=j;this.cDay=l;this.color="";this.lunarFestival="";this.solarFestival="";this.solarTerms=""}function isLeapYear(a){if(((a%4==0)&&(a%100!=0))||(a%400==0)){return true}else{return false}}function sTerm(c,b){var a=new Date((31556925974.7*(c-1900)+sTermInfo[b]*60000)+Date.UTC(1900,0,6,2,5));return(a.getUTCDate())}function cyclical6(a,b){if(a==0){return(jcName0[b])}if(a==1){return(jcName1[b])}if(a==2){return(jcName2[b])}if(a==3){return(jcName3[b])}if(a==4){return(jcName4[b])}if(a==5){return(jcName5[b])}if(a==6){return(jcName6[b])}if(a==7){return(jcName7[b])}if(a==8){return(jcName8[b])}if(a==9){return(jcName9[b])}if(a==10){return(jcName10[b])}if(a==11){return(jcName11[b])}}function CalConv2(f,c,j,h,g,b,a,l,e){var k=g+""+j;if((f==0&&j==6)||(f==6&&j==0)||(f==1&&j==7)||(f==7&&j==1)||(f==2&&j==8)||(f==8&&j==2)||(f==3&&j==9)||(f==9&&j==3)||(f==4&&j==10)||(f==10&&j==4)||(f==5&&j==11)||(f==11&&j==5)){return"<FONT color=#0000A0>日值岁破 大事不宜</font>"}else{if((c==0&&j==6)||(c==6&&j==0)||(c==1&&j==7)||(c==7&&j==1)||(c==2&&j==8)||(c==8&&j==2)||(c==3&&j==9)||(c==9&&j==3)||(c==4&&j==10)||(c==10&&j==4)||(c==5&&j==11)||(c==11&&j==5)){return"<FONT color=#0000A0>日值月破 大事不宜</font>"}else{if((h==0&&k=="911")||(h==1&&k=="55")||(h==2&&k=="111")||(h==3&&k=="75")||(h==4&&k=="311")||(h==5&&k=="95")||(h==6&&k=="511")||(h==7&&k=="15")||(h==8&&k=="711")||(h==9&&k=="35")){return"<FONT color=#0000A0>日值上朔 大事不宜</font>"}else{if((b==1&&a==13)||(b==2&&a==11)||(b==3&&a==9)||(b==4&&a==7)||(b==5&&a==5)||(b==6&&a==3)||(b==7&&a==1)||(b==7&&a==29)||(b==8&&a==27)||(b==9&&a==25)||(b==10&&a==23)||(b==11&&a==21)||(b==12&&a==19)){return"<FONT color=#0000A0>日值杨公十三忌 大事不宜</font>"}else{return 0}}}}}function calendar(p,B){var J,s,I,c,l=1,f,K=0,A,v,L,M,G,t,a,g,o,q,k,r,j,H;var F,b,h;var e=new Array(3);var z=0;var d=0;J=new Date(p,B,1,0,0,0,0);this.length=solarDays(p,B);this.firstWeek=J.getDay();if(B<2){F=cyclical(p-1900+36-1)}else{F=cyclical(p-1900+36)}var D=sTerm(p,2);var C=sTerm(p,B*2);b=cyclical((p-1900)*12+B+12);L=(p-1900)*12+B+12;var w=Date.UTC(p,B,1,0,0,0,0)/86400000+25567+10;for(var E=0;E<this.length;E++){if(l>K){J=new Date(p,B,E+1);s=new Lunar(J);I=s.year;c=s.month;l=s.day;f=s.isLeap;K=f?leapDays(I):monthDays(I,c);if(z==0){d=c}e[z++]=E-l+1}if(B==1&&(E+1)==D){F=cyclical(p-1900+36);M=(p-1900+36)}if((E+1)==C){b=cyclical((p-1900)*12+B+13);L=(p-1900)*12+B+13}h=cyclical(w+E);G=(w+E);this[E]=new calElement(p,B+1,E+1,nStr1[(E+this.firstWeek)%7],I,c,l++,f,F,b,h);this[E].sgz5=CalConv2(M%12,L%12,(G)%12,M%10,(G)%10,c,l-1,B+1,H);this[E].sgz3=cyclical6(L%12,(G)%12)}A=sTerm(p,B*2)-1;v=sTerm(p,B*2+1)-1;this[A].solarTerms=solarTerm[B*2];this[v].solarTerms=solarTerm[B*2+1];if(B==3){this[A].color="red"}for(E=0;E<sFtv.length;E++){if(sFtv[E].match(/^(\d{2})(\d{2})([\s\*])(.+)$/)){if(Number(RegExp.$1)==(B+1)){this[Number(RegExp.$2)-1].solarFestival+=RegExp.$4+"  ";if(RegExp.$3=="*"){this[Number(RegExp.$2)-1].color="red"}}}}for(E=0;E<lFtv.length;E++){if(lFtv[E].match(/^(\d{2})(.{2})([\s\*])(.+)$/)){A=Number(RegExp.$1)-d;if(A==-11){A=1}if(A>=0&&A<z){v=e[A]+Number(RegExp.$2)-1;if(v>=0&&v<this.length){this[v].lunarFestival+=RegExp.$4+"  ";if(RegExp.$3=="*"){this[v].color="red"}}}}}if(B==2||B==3){var u=new easter(p);if(B==u.m){this[u.d-1].solarFestival=this[u.d-1].solarFestival+" 复活节"}}if(p==tY&&B==tM){this[tD-1].isToday=true}}function easter(g){var b=sTerm(g,5);var d=new Date(Date.UTC(g,2,b,0,0,0,0));var a=new Lunar(d);if(a.day<15){var f=15-a.day}else{var f=(a.isLeap?leapDays(g):monthDays(g,a.month))-a.day+15}var e=new Date(d.getTime()+86400000*f);var c=new Date(e.getTime()+86400000*(7-e.getUTCDay()));this.m=c.getUTCMonth();this.d=c.getUTCDate()}function cDay(b){var a;switch(b){case 10:a="初十";break;case 20:a="二十";break;break;case 30:a="三十";break;break;default:a=nStr2[Math.floor(b/10)];a+=nStr1[b%10]}return(a)}var cld;function drawCld(d,o){var h,b,q,r,g;cld=new calendar(d,o);var n=isLeapYear(d);var l=new Date(global.currYear,global.currMonth,global.currDay);var f=new Lunar(l);$("#GZ")[0].innerHTML="  农历"+cyclical(f.year-1900+36)+"年&nbsp;【"+Animals[(f.year-4)%12]+"年】";var e=0;var j=true;for(h=0;h<42;h++){sObj=$("#SD"+h)[0];lObj=$("#LD"+h)[0];sObj.className="";b=h-cld.firstWeek;if(b>-1&&b<cld.length){sObj.innerHTML=b+1;e=b;g=$("#GD"+h);if(cld[b].isToday){g.addClass("jinri")}if(global.currSelectDay==cld[b].sDay){getTodayAction(g,cld[b],true);j=false}else{if(cld[b].isToday&&global.bRefresh){getTodayAction(g,cld[b],true);j=false;global.bRefresh=false}else{if(j&&cld[b].sDay>=28){if(cld[b].sMonth==4||cld[b].sMonth==6||cld[b].sMonth==9||cld[b].sMonth==11){if(cld[b].sDay==30){getTodayAction(g,cld[b],true)}}else{if(cld[b].sMonth==2){if(n){if(cld[b].sDay==29){getTodayAction(g,cld[b],true)}}else{if(cld[b].sDay==28){getTodayAction(g,cld[b],true)}}}}}}}var a=new Array(" ","一","二","三","四","五","六","七","八","九","十","十一","十二");if(cld[b].lDay==1){lObj.innerHTML=""+(cld[b].isLeap?"闰":"")+a[cld[b].lMonth]+"月"}else{lObj.innerHTML=cDay(cld[b].lDay)}q=cld[b].lunarFestival;if(q.length>0){if(q.length>8){q=q.substr(0,5)+"..."}}else{q=cld[b].solarFestival;if(q.length>0){if(q.length>8){q=q.substr(0,5)+"..."}}else{q=cld[b].solarTerms}}if(cld[b].solarTerms=="清明"){q="清明"}if(cld[b].solarTerms=="芒种"){q="芒种"}if(cld[b].solarTerms=="夏至"){q="夏至"}if(cld[b].solarTerms=="冬至"){q="冬至"}if(q.length>0){lObj.innerHTML=q}if(cld[b].sMonth==1&&cld[b].sDay==1){lObj.innerHTML="元旦"}var c=cld[e].sMonth;var k=cld[e].sDay;if(c<10){c="0"+c}if(k<10){k="0"+k}var p=cld[e].sYear+"-"+c+"-"+k;cef.param=p;cef.calendar("hasAction");if(cef.param=="1"){$("#GD"+h).addClass("hasAction")}else{$("#GD"+h).removeClass("hasAction")}}else{$("#GD"+h).addClass("unover").removeClass("hasAction")}}}function getTodayAction(f,a,g){if(judgeSaveOrNot()){return}$(".tdNormal").removeClass("tdDayClick");f.addClass("tdDayClick");var j,c,h;j=a.sYear;c=a.sMonth;h=a.sDay;document.getElementById("ri").innerText=h;global.currSelectDay=h;global.currDay=h;document.getElementById("detail_nianYue").innerHTML=j+"年"+c+"月";document.getElementById("detail_ri").innerHTML=h;document.getElementById("detail_xingQi").innerHTML="星期"+a.week;var k=new Date(global.currYear,global.currMonth,global.currDay);var e=new Lunar(k);document.getElementById("detail_nongLiNian").innerHTML=cyclical(e.year-1900+36)+"年&nbsp;【"+Animals[(e.year-4)%12]+"年】";$("#GZ")[0].innerHTML="  农历"+cyclical(e.year-1900+36)+"年&nbsp;【"+Animals[(e.year-4)%12]+"年】";document.getElementById("detail_yueri").innerHTML=FormatLunarMonth(a.lMonth)+FormatLunarDay(a.lDay);var b=a.lunarFestival;if(c==1&&h==1){b="元旦"}else{if(b==""){b=a.solarFestival;if(b==""){b=a.solarTerms}}}document.getElementById("detail_jieri").innerHTML=b;document.getElementById("detail_xingzuo").innerHTML="星座：&nbsp;"+getAstro(c,h)+"座";if(c<10){c="0"+c}if(h<10){h="0"+h}if(g){var l=j+"-"+c+"-"+h;cef.param=l;cef.calendar("getTodayEvent")}else{if(f.hasClass("hasAction")){var l=j+"-"+c+"-"+h;cef.param=l;cef.calendar("getTodayEvent")}else{$("#todayEventList").html('<div class="noCalendar">{{calendar_js_noevent_text_lang}}</div>');defaultEventDetail()}}}function initHasAction(){drawCld(global.currYear,global.currMonth)}function getAstro(d,b){var c="魔羯水瓶双鱼牡羊金牛双子巨蟹狮子处女天秤天蝎射手魔羯";var a=[20,19,21,21,21,22,23,23,23,23,22,22];return c.substr(d*2-(b<a[d-1]?2:0),2)}function clear(){for(i=0;i<42;i++){sObj=$("#SD"+i)[0];sObj.innerHTML="";lObj=$("#LD"+i)[0];lObj.innerHTML="";$("#GD"+i).removeClass("unover");$("#GD"+i).removeClass("tdDayClick").removeClass("jinri")}}var Today=new Date();var tY=Today.getFullYear();var tM=Today.getMonth();var tD=Today.getDate();var width="130";var offsetX=2;var offsetY=18;var x=0;var y=0;var snow=0;var sw=0;var cnt=0;var dStyle;function FormatLunarMonth(a){var b=new String("正二三四五六七八九十");var c;if(a<=10){c=b.substr(a-1,1)}else{if(a==11){c="十一"}else{c="十二"}}return c+"月"}function FormatLunarDay(c){var d=new String("初十廿三");var b=new String("一二三四五六七八九十");var a;if((c!=20)&&(c!=30)){a=d.substr((c-1)/10,1)+b.substr((c-1)%10,1)}else{if(c!=20){a=d.substr(c/10,1)+"十"}else{a="二十"}}return a}function mOver(g,b){var c,e,a;sObj=$("#SD"+b);var f=sObj.html()-1;if(sObj.html()!=""){$(g).addClass("tdDayOver")}}function mOut(a){$(a).removeClass("tdDayOver");if(cnt>=1){sw=0}if(sw==0){snow=0}else{cnt++}}function mClick(g,b){var c,e,a;sObj=$("#SD"+b);var f=sObj.html()-1;if(sObj.html()!=""){if(cld[f].sgz5!=0){a=cld[f].sgz5}else{a=jcr(cld[f].sgz3)}getTodayAction($(g),cld[f],false)}}function initMonthInterface(){initRiliIndex();clear();cef.calendar("getDate");var a=cef.param;a=a.split(" ");a=a[0].split("-");Today=new Date(parseInt(a[0],10),parseInt(a[1],10)-1,parseInt(a[2],10));tY=Today.getFullYear();tM=Today.getMonth();tD=Today.getDate();if(tY>dateSelection.maxYear||tY<dateSelection.minYear){tY=global.defaultYear}$("#nian").html(tY);$("#yue").html(tM+1);$("#ri").html(tD);drawCld(tY,tM);$("#nianjian").unbind("click").click(function(){dateSelection.goPrevYear()});$("#nianjia").unbind("click").click(function(){dateSelection.goNextYear()});$("#yuejian").unbind("click").click(function(){dateSelection.goPrevMonth()});$("#yuejia").unbind("click").click(function(){dateSelection.goNextMonth()})}var global={currYear:-1,currMonth:-1,currDay:-1,currDate:null,uid:null,username:null,email:null,single:false,currSelectDay:null,errorYear:false,defaultYear:2012,bRefresh:false};var dateSelection={currYear:-1,currMonth:-1,minYear:1902,maxYear:2037,beginYear:0,endYear:0,tmpYear:-1,tmpMonth:-1,init:function(a,b){if(typeof a=="undefined"||typeof b=="undefined"){a=global.currYear;b=global.currMonth;day=global.currDay}this.setYear(a);this.setMonth(b);this.showYearContent();this.showMonthContent()},show:function(){document.getElementById("dateSelectionDiv").style.display="block"},hide:function(){this.rollback();document.getElementById("dateSelectionDiv").style.display="none"},today:function(){var a=new Date();var b=a.getFullYear();if(global.errorYear){b=global.defaultYear}var c=a.getMonth();if(this.tmpYear==b&&this.tmpMonth==c){this.rollback()}else{this.init(b,c);this.commit()}},go:function(){if(this.currYear==this.tmpYear&&this.currMonth==this.tmpMonth){this.rollback()}else{this.commit()}this.hide()},goToday:function(){if(judgeSaveOrNot()){return}global.bRefresh=true;this.today();this.hide()},goPrevMonth:function(){this.prevMonth();this.commit()},goNextMonth:function(){this.nextMonth();this.commit()},goPrevYear:function(){this.prevYear();this.commit()},goNextYear:function(){this.nextYear();this.commit()},changeView:function(){global.currYear=this.currYear;global.currMonth=this.currMonth;clear();$("#nian").html(global.currYear);$("#yue").html(parseInt(global.currMonth)+1);drawCld(global.currYear,global.currMonth)},commit:function(){if(this.tmpYear!=-1||this.tmpMonth!=-1){this.showYearContent();this.showMonthContent();this.changeView();this.tmpYear=-1;this.tmpMonth=-1}},rollback:function(){if(this.tmpYear!=-1){this.setYear(this.tmpYear)}if(this.tmpMonth!=-1){this.setMonth(this.tmpMonth)}this.tmpYear=-1;this.tmpMonth=-1;this.showYearContent();this.showMonthContent()},prevMonth:function(){var b=this.currMonth-1;if(b==-1){var a=this.currYear-1;if(a>=this.minYear){b=11;this.setYear(a)}else{b=0}}this.setMonth(b)},nextMonth:function(){var b=this.currMonth+1;if(b==12){var a=this.currYear+1;if(a<=this.maxYear){b=0;this.setYear(a)}else{b=11}}this.setMonth(b)},prevYear:function(){var a=this.currYear-1;if(a>=this.minYear){this.setYear(a)}},nextYear:function(){var a=this.currYear+1;if(a<=this.maxYear){this.setYear(a)}},prevYearPage:function(){this.endYear=this.beginYear-1;this.showYearContent(null,this.endYear)},nextYearPage:function(){this.beginYear=this.endYear+1;this.showYearContent(this.beginYear,null)},selectYear:function(){var a=$('select[@name="SY"] option[@selected]').text();this.setYear(a);this.commit()},selectMonth:function(){var a=$('select[@name="SM"] option[@selected]').text();this.setMonth(a-1);this.commit()},setYear:function(a){if(this.tmpYear==-1&&this.currYear!=-1){this.tmpYear=this.currYear}$("#SY"+this.currYear).removeClass("curr");this.currYear=a;$("#SY"+this.currYear).addClass("curr")},setMonth:function(a){if(this.tmpMonth==-1&&this.currMonth!=-1){this.tmpMonth=this.currMonth}$("#SM"+this.currMonth).removeClass("curr");this.currMonth=a;$("#SM"+this.currMonth).addClass("curr")},showYearContent:function(c,d){if(!c){if(!d){d=this.currYear+1}this.endYear=d;if(this.endYear>this.maxYear){this.endYear=this.maxYear}this.beginYear=this.endYear-3;if(this.beginYear<this.minYear){this.beginYear=this.minYear;this.endYear=this.beginYear+3}}if(!d){if(!c){c=this.currYear-2}this.beginYear=c;if(this.beginYear<this.minYear){this.beginYear=this.minYear}this.endYear=this.beginYear+3;if(this.endYear>this.maxYear){this.endYear=this.maxYear;this.beginYear=this.endYear-3}}var b="";for(var a=this.beginYear;a<=this.endYear;a++){b+='<span id="SY'+a+'" class="year" onclick="dateSelection.setYear('+a+')">'+a+"</span>"}document.getElementById("yearListContent").innerHTML=b;$("#SY"+this.currYear).addClass("curr")},showMonthContent:function(){var b="";for(var a=0;a<12;a++){b+='<span id="SM'+a+'" class="month" onclick="dateSelection.setMonth('+a+')">'+(a+1).toString()+"</span>"}document.getElementById("monthListContent").innerHTML=b;$("#SM"+this.currMonth).addClass("curr")}};function initRiliIndex(){var a=new Date();global.currYear=a.getFullYear();if(global.currYear<dateSelection.minYear||global.currYear>dateSelection.maxYear){global.currYear=global.defaultYear;global.errorYear=true}else{global.errorYear=false}global.currMonth=a.getMonth();global.currDay=a.getDate();dateSelection.init()};