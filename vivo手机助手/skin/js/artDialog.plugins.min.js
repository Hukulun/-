(function(m){m.alert=m.dialog.alert=function(c,i){return m.dialog({id:"Alert",fixed:!0,lock:!0,content:c,ok:!0,beforeunload:i})};m.confirm=m.dialog.confirm=function(i,j,c){return m.dialog({id:"Confirm",fixed:!0,lock:!0,content:i,ok:j,cancel:c})};m.prompt=m.dialog.prompt=function(i,j,c,n){var k;return m.dialog({id:"Prompt",fixed:!0,lock:!0,content:['<div style="margin-bottom:5px;font-size:12px">',i,'</div><div><input type="text" class="d-input-text" value="',c||"",'" style="width:18em;height:15px;padding:6px 4px" /></div>'].join(""),initialize:function(){k=this.dom.content.find(".d-input-text")[0];k.select();k.focus()},ok:function(){return j&&j.call(this,k.value)},cancel:function(){return n&&n.call(this)}})};m.dialog.prototype.shake=function(){var c=function(k,j,p){var n=+new Date,o=setInterval(function(){var q=(+new Date-n)/p;1<=q?(clearInterval(o),j(q)):k(q)},13)},i=function(q,p,k,j){var o=j;void 0===o&&(o=6,k/=o);var n=parseInt(q.style.marginLeft)||0;c(function(r){q.style.marginLeft=n+(p-n)*r+"px"},function(){0!==o&&i(q,1===o?0:1.3*(p/o-p),k,--o)},k)};return function(){i(this.dom.wrap[0],40,600);return this}}();var e=function(){var c=this,i=function(j){var k=c[j];c[j]=function(){return k.apply(c,arguments)}};i("start");i("over");i("end")};e.prototype={start:function(c){m(document).bind("mousemove",this.over).bind("mouseup",this.end);this._sClientX=c.clientX;this._sClientY=c.clientY;this.onstart(c.clientX,c.clientY);return !1},over:function(c){this._mClientX=c.clientX;this._mClientY=c.clientY;this.onover(c.clientX-this._sClientX,c.clientY-this._sClientY);return !1},end:function(c){m(document).unbind("mousemove",this.over).unbind("mouseup",this.end);this.onend(c.clientX,c.clientY);return !1}};var h=m(window),g=m(document),l=document.documentElement,d=!!("minWidth" in l.style)&&"onlosecapture" in l,b="setCapture" in l,a=function(){return !1},f=function(N){var O=new e,M=artDialog.focus,L=M.dom,I=L.wrap,H=L.title,K=I[0],J=H[0],G=L.main[0],F=K.style,C=G.style,B=N.target===L.se[0]?!0:!1,r=(L="fixed"===K.style.position)?0:g.scrollLeft(),q=L?0:g.scrollTop(),E=h.width()-K.offsetWidth+r,D=h.height()-K.offsetHeight+q,p,o,k,j;O.onstart=function(){B?(p=G.offsetWidth,o=G.offsetHeight):(k=K.offsetLeft,j=K.offsetTop);g.bind("dblclick",O.end).bind("dragstart",a);d?H.bind("losecapture",O.end):h.bind("blur",O.end);b&&J.setCapture();I.addClass("d-state-drag");M.focus()};O.onover=function(n,i){if(B){var t=n+p,s=i+o;F.width="auto";C.width=Math.max(0,t)+"px";F.width=K.offsetWidth+"px";C.height=Math.max(0,s)+"px"}else{t=Math.max(r,Math.min(E,n+k)),s=Math.max(q,Math.min(D,i+j)),F.left=t+"px",F.top=s+"px"}};O.onend=function(){g.unbind("dblclick",O.end).unbind("dragstart",a);d?H.unbind("losecapture",O.end):h.unbind("blur",O.end);b&&J.releaseCapture();I.removeClass("d-state-drag")};O.start(N)};m(document).bind("mousedown",function(i){var j=artDialog.focus;if(j){var n=i.target,k=j.config,j=j.dom;if(!1!==k.drag&&n===j.title[0]||!1!==k.resize&&n===j.se[0]){return f(i),!1}}})})(this.art||this.jQuery);