/*!
* artDialog 5.0.3
* Date: 2013-02-20
* https://github.com/aui/artDialog
* (c) 2009-2013 TangBin, http://www.planeArt.cn
*
* This is licensed under the GNU LGPL, version 2.1 or later.
* For details, see: http://creativecommons.org/licenses/LGPL/2.1/
*/
(function(g,c){function d(q,x,m){x=x||document,m=m||"*";var k=0,p=0,y=[],l=x.getElementsByTagName(m),w=l.length,v=new RegExp("(^|\\s)"+q+"(\\s|$)");for(;k<w;k++){v.test(l[k].className)&&(y[p]=l[k],p++)}return y}function h(l){var e=j.expando,k=l===g?0:l[e];return k===c&&(l[e]=k=++j.uuid),k}function a(i){return j.isWindow(i)?i:i.nodeType===9?i.defaultView||i.parentWindow:!1}var j=g.art=function(k,i){return new j.fn.constructor(k,i)},f=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/,b=/[\n\t]/g;return g.$===c&&(g.$=j),j.fn=j.prototype={constructor:function(m,l){var o,k;l=l||document;if(!m){return this}if(m.nodeType){return this[0]=m,this}if(typeof m=="string"){o=f.exec(m);if(o&&o[2]){return k=l.getElementById(o[2]),k&&k.parentNode&&(this[0]=k),this}}return this[0]=m,this},hasClass:function(k){var i=" "+k+" ";return(" "+this[0].className+" ").replace(b," ").indexOf(i)>-1?!0:!1},addClass:function(i){return this.hasClass(i)||(this[0].className+=" "+i),this},removeClass:function(k){var i=this[0];return k?this.hasClass(k)&&(i.className=i.className.replace(k," ")):i.className="",this},css:function(n,m){var k,l=this[0],p=arguments[0];if(typeof n=="string"){if(m===c){return j.css(l,n)}l.style[n]=m}else{for(k in p){l.style[k]=p[k]}}return this},show:function(){return this.css("display","block")},hide:function(){return this.css("display","none")},offset:function(){var q=this[0],x=q.getBoundingClientRect(),m=q.ownerDocument,k=m.body,p=m.documentElement,y=p.clientTop||k.clientTop||0,l=p.clientLeft||k.clientLeft||0,w=x.top+(self.pageYOffset||p.scrollTop)-y,v=x.left+(self.pageXOffset||p.scrollLeft)-l;return{left:v,top:w}},html:function(k){var i=this[0];return k===c?i.innerHTML:(j.cleanData(i.getElementsByTagName("*")),i.innerHTML=k,this)},remove:function(){var i=this[0];return j.cleanData(i.getElementsByTagName("*")),j.cleanData([i]),i.parentNode.removeChild(i),this},bind:function(k,i){return j.event.add(this[0],k,i),this},unbind:function(k,i){return j.event.remove(this[0],k,i),this}},j.fn.constructor.prototype=j.fn,j.isWindow=function(i){return i&&typeof i=="object"&&"setInterval" in i},j.fn.find=function(n){var l,m=this[0],k=n.split(".")[1];return k?document.getElementsByClassName?l=m.getElementsByClassName(k):l=d(k,m):l=m.getElementsByTagName(n),j(l[0])},j.each=function(q,v){var p,l=0,m=q.length,t=m===c;if(t){for(p in q){if(v.call(q[p],p,q[p])===!1){break}}}else{for(var k=q[0];l<m&&v.call(k,l,k)!==!1;k=q[++l]){}}return q},j.data=function(o,n,l){var m=j.cache,k=h(o);return n===c?m[k]:(m[k]||(m[k]={}),l!==c&&(m[k][n]=l),m[k][n])},j.removeData=function(v,n){var p=!0,m=j.expando,o=j.cache,l=h(v),k=l&&o[l];if(!k){return}if(n){delete k[n];for(var q in k){p=!1}p&&delete j.cache[l]}else{delete o[l],v.removeAttribute?v.removeAttribute(m):v[m]=null}},j.uuid=0,j.cache={},j.expando="@cache"+ +(new Date),j.event={add:function(q,m,p){var l,n,v=j.event,k=j.data(q,"@events")||j.data(q,"@events",{});l=k[m]=k[m]||{},n=l.listeners=l.listeners||[],n.push(p),l.handler||(l.elem=q,l.handler=v.handler(l),q.addEventListener?q.addEventListener(m,l.handler,!1):q.attachEvent("on"+m,l.handler))},remove:function(v,y,k){var p,z,m,x=j.event,w=!0,q=j.data(v,"@events");if(!q){return}if(!y){for(p in q){x.remove(v,p)}return}z=q[y];if(!z){return}m=z.listeners;if(k){for(p=0;p<m.length;p++){m[p]===k&&m.splice(p--,1)}}else{z.listeners=[]}if(z.listeners.length===0){v.removeEventListener?v.removeEventListener(y,z.handler,!1):v.detachEvent("on"+y,z.handler),delete q[y],z=j.data(v,"@events");for(var n in z){w=!1}w&&j.removeData(v,"@events")}},handler:function(e){return function(m){m=j.event.fix(m||g.event);for(var k=0,l=e.listeners,n;n=l[k++];){n.call(e.elem,m)===!1&&(m.preventDefault(),m.stopPropagation())}}},fix:function(k){if(k.target){return k}var i={target:k.srcElement||document,preventDefault:function(){k.returnValue=!1},stopPropagation:function(){k.cancelBubble=!0}};for(var l in k){i[l]=k[l]}return i}},j.cleanData=function(p){var l=0,n,k=p.length,m=j.event.remove,q=j.removeData;for(;l<k;l++){n=p[l],m(n),q(n)}},j.css="defaultView" in document&&"getComputedStyle" in document.defaultView?function(k,i){return document.defaultView.getComputedStyle(k,!1)[i]}:function(k,i){return k.currentStyle[i]||""},j.each(["Left","Top"],function(l,i){var k="scroll"+i;j.fn[k]=function(){var e=this[0],m;return m=a(e),m?"pageXOffset" in m?m[l?"pageYOffset":"pageXOffset"]:m.document.documentElement[k]||m.document.body[k]:e[k]}}),j.each(["Height","Width"],function(l,i){var k=i.toLowerCase();j.fn[k]=function(n){var m=this[0];return m?j.isWindow(m)?m.document.documentElement["client"+i]||m.document.body["client"+i]:m.nodeType===9?Math.max(m.documentElement["client"+i],m.body["scroll"+i],m.documentElement["scroll"+i],m.body["offset"+i],m.documentElement["offset"+i]):null:n==null?null:this}}),j})(window),function(q,y,g){function m(c){var a=v.focus;a&&a._isLock&&!a.dom.wrap[0].contains(c.target)&&(c.stopPropagation(),a.focus())}if(document.compatMode==="BackCompat"){throw new Error("artDialog: Document types require more than xhtml1.0")}var b,k=0,z=document.activeElement,d=q(document.getElementsByTagName("html")[0]),x="artDialog"+ +(new Date),w=y.VBArray&&!y.XMLHttpRequest,p="createTouch" in document&&!("onmousemove" in document)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),j=!w&&!p,v=function(n,f,s){n=n||{};if(typeof n=="string"||n.nodeType===1){n={content:n,fixed:!p}}var c,i=v.defaults,l=n.follow=this.nodeType===1&&this||n.follow;for(var r in i){n[r]===g&&(n[r]=i[r])}n.id=l&&l[x+"follow"]||n.id||x+k,c=v.list[n.id];if(c){return l&&c.follow(l),c.zIndex().focus(),z=document.activeElement,c}j||(n.fixed=!1);if(!n.button||!n.button.push){n.button=[]}return f!==g&&(n.ok=f),n.ok&&n.button.push({id:"ok",value:n.okValue,callback:n.ok,focus:!0}),s!==g&&(n.cancel=s),n.cancel&&n.button.push({id:"cancel",value:n.cancelValue,callback:n.cancel}),v.defaults.zIndex=n.zIndex,k++,v.list[n.id]=b?b.constructor(n):new v.fn.constructor(n)};v.version="5.0.3",v.fn=v.prototype={constructor:function(c){var a;return z=document.activeElement,this.closed=!1,this.config=c,this.dom=a=this.dom||this._innerHTML(c),c.skin&&a.wrap.addClass(c.skin),a.wrap.css("position",c.fixed?"fixed":"absolute"),a.close[c.cancel===!1?"hide":"show"](),a.content.css("padding",c.padding),this.button.apply(this,c.button),this.title(c.title).content(c.content).size(c.width,c.height).time(c.time),this._reset(),this.zIndex(),c.lock&&this.lock(),this._addEvent(),this[c.visible?"visible":"hidden"]().focus(),b=null,c.initialize&&c.initialize.call(this),this},content:function(h){var C,A,f,l,B=this,e=this.dom.content,c=e[0];return this._elemBack&&(this._elemBack(),delete this._elemBack),typeof h=="string"?e.html(h):h&&h.nodeType===1&&(l=h.style.display,C=h.previousSibling,A=h.nextSibling,f=h.parentNode,this._elemBack=function(){C&&C.parentNode?C.parentNode.insertBefore(h,C.nextSibling):A&&A.parentNode?A.parentNode.insertBefore(h,A):f&&f.appendChild(h),h.style.display=l,B._elemBack=null},e.html(""),c.appendChild(h),q(h).show()),this._reset(),this},title:function(h){var c=this.dom,l=c.outer,f=c.title,a="d-state-noTitle";return h===!1?(f.hide().html(""),l.addClass(a)):(f.show().html(h),l.removeClass(a)),this},position:function(){var H=this.dom,L=H.wrap[0],C=H.window,u=H.document,E=this.config.fixed,M=E?0:u.scrollLeft(),B=E?0:u.scrollTop(),K=C.width(),G=C.height(),D=L.offsetWidth,J=L.offsetHeight,F=(K-D)/2+M,A=(G-J)*382/1000+B,I=L.style;return I.left=Math.max(parseInt(F),M)+"px",I.top=Math.max(parseInt(A),B)+"px",this._follow&&(this._follow.removeAttribute(x+"follow"),this._follow=null),this},size:function(c,a){var f=this.dom.main[0].style;return typeof c=="number"&&(c+="px"),typeof a=="number"&&(a+="px"),f.width=c,f.height=a,this},follow:function(I){var P=q(I),L=this.config;if(!I||!I.offsetWidth&&!I.offsetHeight){return this.position(this._left,this._top)}var U=L.fixed,J=x+"follow",O=this.dom,ab=O.window,X=O.document,R=ab.width(),Z=ab.height(),V=X.scrollLeft(),M=X.scrollTop(),Y=P.offset(),G=I.offsetWidth,Q=I.offsetHeight,W=U?Y.left-V:Y.left,B=U?Y.top-M:Y.top,aa=this.dom.wrap[0],F=aa.style,H=aa.offsetWidth,u=aa.offsetHeight,D=W-(H-G)/2,e=B+Q,A=U?0:V,K=U?0:M;return D=D<A?W:D+H>R&&W-H>A?W-H+G:D,e=e+u>Z+K&&B-u>K?B-u:e,F.left=parseInt(D)+"px",F.top=parseInt(e)+"px",this._follow&&this._follow.removeAttribute(J),this._follow=I,I[J]=L.id,this},button:function(){var I=this.dom,B=I.buttons,e=B[0],D="d-state-highlight",J=this._listeners=this._listeners||{},A=[].slice.call(arguments),H=0,F,C,G,E,u;for(;H<A.length;H++){F=A[H],C=F.value,G=F.id||C,E=!J[G],u=E?document.createElement("input"):J[G].elem,u.type="button",u.className="d-button",J[G]||(J[G]={}),C&&(u.value=C),F.width&&(u.style.width=F.width),F.callback&&(J[G].callback=F.callback),F.focus&&(this._focus&&this._focus.removeClass(D),this._focus=q(u).addClass(D),this.focus()),u[x+"callback"]=G,u.disabled=!!F.disabled,E&&(J[G].elem=u,e.appendChild(u))}return B[0].style.display=A.length?"":"none",this},visible:function(){return this.dom.wrap.css("visibility","visible"),this.dom.outer.addClass("d-state-visible"),this._isLock&&this._lockMask.show(),this},hidden:function(){return this.dom.wrap.css("visibility","hidden"),this.dom.outer.removeClass("d-state-visible"),this._isLock&&this._lockMask.hide(),this},close:function(){if(this.closed){return this}var f=this.dom,c=f.wrap,l=v.list,a=this.config.beforeunload;if(a&&a.call(this)===!1){return this}v.focus===this&&(v.focus=null),this._follow&&this._follow.removeAttribute(x+"follow"),this._elemBack&&this._elemBack(),this.time(),this.unlock(),this._removeEvent(),delete l[this.config.id];if(b){c.remove()}else{b=this,f.title.html(""),f.content.html(""),f.buttons.html(""),c[0].className=c[0].style.cssText="",f.outer[0].className="d-outer",c.css({left:0,top:0,position:j?"fixed":"absolute"});for(var h in this){this.hasOwnProperty(h)&&h!=="dom"&&delete this[h]}this.hidden()}return z&&z.focus(),this.closed=!0,this},time:function(c){var a=this,f=this._timer;return f&&clearTimeout(f),c&&(this._timer=setTimeout(function(){a._click("cancel")},c)),this},focus:function(){if(this.config.focus){try{var c=this._focus&&this._focus[0]||this.dom.close[0];c&&c.focus()}catch(a){}}return this},zIndex:function(){var c=this.dom,a=v.focus,f=v.defaults.zIndex++;return c.wrap.css("zIndex",f),this._lockMask&&this._lockMask.css("zIndex",f-1),a&&a.dom.outer.removeClass("d-state-focus"),v.focus=this,c.outer.addClass("d-state-focus"),this},lock:function(){if(this._isLock){return this}var l=this,f=this.config,c=this.dom,e=document.createElement("div"),h=q(e),a=v.defaults.zIndex-1;return this.zIndex(),c.outer.addClass("d-state-lock"),h.css({zIndex:a,position:"fixed",left:0,top:0,width:"100%",height:"100%",overflow:"hidden"}).addClass("d-mask"),j||h.css({position:"absolute",width:q(y).width()+"px",height:q(document).height()+"px"}),h.bind("dblclick",function(){if(!l.config.dblclickNotHide){l._click("cancel")}}),h.bind("contextmenu",function(){return false}),document.body.appendChild(e),this._lockMask=h,this._isLock=!0,this},unlock:function(){return this._isLock?(this._lockMask.unbind(),this._lockMask.hide(),this._lockMask.remove(),this.dom.outer.removeClass("d-state-lock"),this._isLock=!1,this):this},_innerHTML:function(C){var t=document.body;if(!t){throw new Error('artDialog: "documents.body" not ready')}var h=document.createElement("div");h.style.cssText="position:absolute;left:0;top:0",h.innerHTML=v._templates.replace(/{([^}]+)}/g,function(i,a){var f=C[a];return typeof f=="string"?f:""}),t.insertBefore(h,t.firstChild);var l,B=0,e={},c=h.getElementsByTagName("*"),A=c.length;for(;B<A;B++){l=c[B].className.split("d-")[1],l&&(e[l]=q(c[B]))}return e.window=q(y),e.document=q(document),e.wrap=q(h),e},_click:function(c){var a=this._listeners[c]&&this._listeners[c].callback;return typeof a!="function"||a.call(this)!==!1?this.close():this},_reset:function(){var a=this.config.follow||this._follow;a?this.follow(a):this.position()},_addEvent:function(){var c=this,a=this.dom;a.wrap.bind("click",function(h){var f=h.target,e;if(f.disabled){return !1}if(f===a.close[0]){return c._click("cancel"),!1}e=f[x+"callback"],e&&c._click(e)}).bind("mousedown",function(){c.zIndex()})},_removeEvent:function(){this.dom.wrap.unbind()}},v.fn.constructor.prototype=v.fn,q.fn.dialog=q.fn.artDialog=function(){var a=arguments;return this[this.live?"live":"bind"]("click",function(){return v.apply(this,a),!1}),this},v.focus=null,v.get=function(a){return a===g?v.list:v.list[a]},v.list={},q(document).bind("keydown",function(l){var c=l.target,o=c.nodeName,h=/^input|textarea$/i,a=v.focus,f=l.keyCode;if(!a||!a.config.esc||h.test(o)&&c.type!=="button"){return}f===27&&a._click("cancel")}),q.fn.live&&q("body").live("focus",m),q(y).bind("resize",function(){var c=v.list;for(var a in c){c[a]._reset()}}),v._templates='<div class="d-outer" role="dialog" tabindex="-1" aria-labelledby="d-title-{id}" aria-describedby="d-content-{id}"><table class="d-border"><tbody><tr><td class="d-nw"></td><td class="d-n"></td><td class="d-ne"></td></tr><tr><td class="d-w"></td><td class="d-c"><div class="d-inner"><table class="d-dialog"><tbody><tr><td class="d-header"><div class="d-titleBar"><div id="d-title-{id}" class="d-title"></div><a class="d-close" href="javascript:;"></a></div></td></tr><tr><td class="d-main"><div id="d-content-{id}" class="d-content"></div></td></tr><tr><td class="d-footer"><div class="d-buttons"></div></td></tr></tbody></table></div></td><td class="d-e"></td></tr><tr><td class="d-sw"></td><td class="d-s"></td><td class="d-se"></td></tr></tbody></table></div>',v.defaults={content:'<div class="d-loading"><span>loading..</span></div>',title:"提示",button:null,ok:null,cancel:null,initialize:null,beforeunload:null,okValue:"确定",cancelValue:"取消",width:"auto",height:"auto",padding:"20px 25px",skin:null,time:null,esc:!0,focus:!0,visible:!0,follow:null,lock:!1,fixed:!1,zIndex:1987},this.artDialog=q.dialog=q.artDialog=v}(this.art||this.jQuery,this);