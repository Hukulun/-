var isMore=true;$(document).ready(function(){$.event.props=$.event.props.join("|").replace("layerX|layerY|","").split("|");$("#cateName").text(parent.global.cateName);$("#searchResult").hide();if(parent.global.arrayType==3){document.getElementById("arrTypeTime").className="arrList";document.getElementById("arrTypeDiscuss").className="arrList";document.getElementById("arrTypeDownLoad").className="arrList arrListOn"}else{if(parent.global.arrayType==5){document.getElementById("arrTypeTime").className="arrList";document.getElementById("arrTypeDiscuss").className="arrList arrListOn";document.getElementById("arrTypeDownLoad").className="arrList"}else{if(parent.global.arrayType==1){document.getElementById("arrTypeTime").className="arrList arrListOn";document.getElementById("arrTypeDiscuss").className="arrList";document.getElementById("arrTypeDownLoad").className="arrList"}}}if(parent.global.cateId=="recommend"||parent.global.cateId=="search"||parent.global.cateId=="ads"){document.getElementById("arrType").style.display="none";if(parent.global.cateId=="search"){document.getElementById("cateName").innerText="搜索";document.getElementById("pageNumShow").style.display="none"}}else{if(parent.global.cateId=="topic"){document.getElementById("arrType").style.display="none"}else{document.getElementById("arrType").style.display="block"}}});window.onload=function(){global.refresh=true;parent.global.page=1;if(parent.global.cateId=="all"){parent.iframeGetAllApp()}else{if(parent.global.cateId=="recommend"){parent.iframeGetRecommend()}else{if(parent.global.cateId=="search"){parent.iframeGetSearch()}else{if(parent.global.cateId=="ads"){parent.iframeGetAdsApp()}else{if(parent.global.cateId=="hui"){parent.iframeGetHuiApp()}else{if(parent.global.cateId=="topic"){parent.iframeGetTopicApp()}else{parent.iframeGetCategoryApp()}}}}}}$("#loadingtip").hide();$("#appList").scroll(function(){if(isAtBottom()&&isMore){$("#loadingtip").show();++parent.global.page;parent.getArrayAppList(parent.global.arrayType,parent.global.hasSub,parent.global.page)}});$(window).resize(function(){var e=document.getElementById("appList");var b=e.clientWidth;var d=b%159;var c=(b-d)/159;var f=d%c;var a=(d-f)/c;$(".appList").css({"padding-left":f+"px"});$(".app").css("margin-left",a+"px")})};function isAtBottom(){var a=document.getElementById("appList");return a.scrollHeight>(a.scrollTop+a.clientHeight)?false:true}function isScrolled(){var a=document.getElementById("appList");return a.offsetWidth!=a.clientWidth}global={count:0,refresh:false};function pageselectCallback(b,d){var c=24;if(parent.global.cateId=="ads"){temp='<img class=adsImg src="'+parent.global.appIconUrl+'" />';c=16}var a=b*c+1;parent.global.page=b+1;parent.getArrayAppList(parent.global.arrayType,parent.global.hasSub,parent.global.page);document.getElementById("appList").innerHTML='<div class="appPrompt">正在加载</div>';parent.addHistoryEvent()}document.oncontextmenu=new Function("return false;");function myfocus(){}function tabTypeC(a){global.refresh=true;parent.global.hasSub=a.id;a=$(a);if(!a.hasClass("tabListOn")){$("#tabType").find(".tabList").removeClass("tabListOn");a.addClass("tabListOn");parent.global.page=1;document.getElementById("appList").innerHTML='<div class="appPrompt">正在加载</div>';parent.getArrayAppList(parent.global.arrayType,parent.global.hasSub,parent.global.page);parent.addHistoryEvent()}}function arrTypeC(b,a){global.refresh=true;b=$(b);if(!b.hasClass("arrListOn")){$("#appList").empty();$("#arrType").find(".arrList").removeClass("arrListOn");b.addClass("arrListOn");parent.global.arrayType=parseInt(a,10);parent.global.page=1;document.getElementById("appList").innerHTML='<div class="appPrompt">正在加载</div>';if(parent.global.cateId=="all"){parent.iframeGetAllApp();return}parent.getArrayAppList(a,parent.global.hasSub,parent.global.page);parent.addHistoryEvent()}}function setSubCate(a){var e=$("#tabType");e.empty();if(a!=""&&a!=null&&a!="0"){var b="";for(var c=0;c<a.length;c++){b+='<div id="'+a[c]["id"]+'" class="tabList" onmousedown="tabTypeC(this)">'+a[c]["titleCN"]+"</div>"}e.html(b);var e=document.getElementById(parent.global.hasSub);if(e!=null){e.className="tabList tabListOn"}else{var d=$(".tabList:first");d.addClass("tabListOn");parent.global.hasSub=d.attr("id")}}else{}}function setCateApp(e){var m=$("#appList");$(".appPrompt").hide();var l=0,d="",t="",k="",j=-1;if(e!=""&&e!=null&&e!="0"){var f=0;var v=parent.global.page;if(v==1){f=parseInt(e.appCount,10);parent.global.count=f}else{f=parent.global.count}var c=0;global.count=f;var u=24;if(parent.global.cateId=="search"){$("#searchResult").show();$("#keyWord").text(parent.global.searchTxt);$("#searchNum").text(f)}else{if(parent.global.cateId=="ads"){t='<img class=adsImg src="'+parent.global.appIconUrl+'" />';u=16}else{if(parent.global.cateId=="hui"){t='<div class="huiTop"><img src="../hui/'+parent.global.appIconUrl+'" /><div> '+parent.global.huiInfo+"</div></div>";u=20}else{if(parent.global.cateId=="topic"){var s=parent.global.huiInfo;s=s.replace("</div>","").replace("</a>","");t='<div class="huiTop"><img src="'+parent.global.appIconUrl+'" /><div> '+s+"</div></div>";u=20}}}}if(parent.global.page==1||global.refresh){global.refresh=false}var a=e.appList;if(a!=undefined){for(var q=0;q<a.length;q++){l=parseInt(a[q]["score"],10);d="";while(l--){d+='<img src="../images/score.png" />'}l=a[q]["status"];k=getButtonStatus(l,a[q]["csPackageName"]);j=a[q]["downloadCount"];if(j!="-1"){j="下载<span>"+formatNum(j)+"</span>次"}else{j="评论<span>"+a[q]["raterCnt"]+"</span>次"}if(parent.global.arrayType==5){j="评论<span>"+a[q]["raterCnt"]+"</span>次"}if(a[q]["iconUrl"]==""){a[q]["iconUrl"]="../images/default.png"}t='<table class="app" onmousedown="appClick(this,'+a[q]["id"]+')"><tr>	                		<td class="iconImg" valign="center"><img src="'+a[q]["iconUrl"]+'" onerror="appImgError(this)"/></td><td valign="top">	                		    <div class="appName">'+a[q]["titleCN"]+'</div>	                		    <div class="appScore">'+d+'</div>		                        <div class="appInfo" version="'+a[q]["versionName"]+'" downloadUrl="'+a[q]["downloadUrl"]+'" appName="'+a[q]["titleCN"]+'" 	                             >'+j+"</div>"+k+"	                		</td></tr></table>";m.append(t)}}$("#loadingtip").hide();var r=parseInt(e.maxPage,10);var h=parseInt(e.pageNo,10);if(r>h){isMore=true}else{isMore=false}var m=document.getElementById("appList");var n=m.clientWidth;var g=n%159;var b=(n-g)/159;var p=g%b;var o=(g-p)/b;$(".appList").css({"padding-left":p+"px"});$(".app").css("margin-left",o+"px");if(!isScrolled()&&isMore){$("#loadingtip").show();++parent.global.page;parent.getArrayAppList(parent.global.arrayType,parent.global.hasSub,parent.global.page)}}else{if(parent.global.page==1){if(a=="0"){t='<div class="appBusy">网络异常，加载失败！</div>'}else{if(parent.global.cateId=="search"){t='<div class="notFind">抱歉，没有找到相关应用！</div>';$("#searchResult").show();$("#keyWord").text(parent.global.searchTxt);$("#searchNum").text("0")}else{t='<div class="empty">该页面没有相关应用！</div>'}}m.html(t)}else{$("#loadingtip").hide()}}}function setTabType(a){var d=$("#tabType");d.empty();var b;if(a!=""&&a!=null){for(var c=0;c<a.length;c++){if(c==0){b+='<div class="tabList tabListOn" onmousedown="tabTypeC(this,"'+a[c]["tabUrl"]+'")" >'+a[c]["tabName"]+"</div>"}else{b+='<div class="tabList" onmousedown="tabTypeC(this,"'+a[c]["tabUrl"]+'")" >'+a[c]["tabName"]+"</div>"}}}};