function appImgError(a){a.src="../images/defaultAppImg.png";a.parentNode.style.backgroundImage=""}function viewImgError(a){a.src="../images/viewBg.png";a.parentNode.style.backgroundImage=""}function formatNum(a){if(a>10000){a=a/10000;a=a.toFixed(0);a=a+"万+"}return a}function InstallOrUpdateSuccess(b,a){var d=a.replace(/\./g,"");d=d.replace(/^\s+|\s+$/g,"");if(d==""){return}var c=$("."+d);if(b=="-1"){c.addClass("unable").html('<img src="../images/doing.gif"/><span>下载中</span>')}else{if(b=="5"){c.addClass("unable").html('<img src="../images/doing.gif"/><span>安装中</span>')}else{if(b=="4"){c.addClass("unable").html("已安装")}else{if(b=="3"){c.removeClass("unable").html("立即更新")}else{c.removeClass("unable").html("立即安装")}}}}if(parent.global.packageName==a){if(b=="4"){$("#appDiscuz").removeAttr("disabled").attr("placeholder","这个应用什么样，说点什么吧！").val("");$("#appSubmitButton").removeClass("disable")}else{$("#appDiscuz").attr("disabled","disabled").attr("placeholder","您还未安装该应用，不能进行评论！").val("");$("#appSubmitButton").addClass("disable")}}}function getButtonStatus(b,a){var c="";var d=a.replace(/\./g,"");if(b=="1"){c='<div class="download unable '+d+'" id="'+a+'" onclick="install(this)"><img src="../images/doing.gif"/><span>下载中</span></div>'}else{if(b=="5"){c='<div class="download unable '+d+'" id="'+a+'" onclick="install(this)"><img src="../images/doing.gif"/><span>安装中</span></div>'}else{if(b=="3"){c='<div class="download '+d+'" id="'+a+'" onclick="install(this)">立即更新</div>'}else{if(b=="4"){c='<div class="download unable '+d+'" id="'+a+'" onclick="install(this)">已安装</div>'}else{c='<div class="download '+d+'" id="'+a+'" onclick="install(this)">立即安装</div>'}}}}return c}function setDetailButtonStatus(b,a){var d=a.replace(/\./g,"");var c=$("."+d);if(b=="1"){c.addClass("unable").html('<img src="../images/doing.gif"/><span>下载中</span>')}else{if(b=="5"){c.addClass("unable").html('<img src="../images/doing.gif"/><span>安装中</span></div>')}else{if(b=="3"){c.removeClass("unable").html("立即更新")}else{if(b=="4"){c.addClass("unable").html("已安装")}else{c.removeClass("unable").html("立即安装")}}}}if(parent.global.appDev!="来自网络"){if(b=="3"||b=="4"){$("#appDiscuz").removeAttr("disabled");$("#appDiscuz").attr("placeholder","这个应用什么样，说点什么吧！").val("");$("#appSubmitButton").removeClass("disable")}else{$("#appDiscuz").attr("disabled","disabled");$("#appDiscuz").attr("placeholder","您还未安装该应用，不能进行评论！").val("");$("#appSubmitButton").addClass("disable")}}else{$("#appDiscuz").attr("disabled","disabled");$("#appDiscuz").attr("placeholder","来自网络应用，不能进行评论！").val("");$("#appSubmitButton").addClass("disable");$("#discuzList").html('<div class="webDiscuss">来自网络应用，无法获取评论内容!</div>')}}function install(g){if(event.button==2){return}var c=g.id;var e=c.replace(/\./g,"");var d=$("."+e);d.addClass("unable");if(g.innerText=="立即安装"||g.innerText=="立即更新"){d.html('<img src="../images/doing.gif"/><span>下载中</span>');parent.changePhoneAppStatus("-1",c)}else{return true}var c="",f="",a="",h="",b="";c=g.id;g=$(g).prev();f=g.attr("downloadUrl");a=g.attr("appName");b=g.attr("version");h='[{"packageName":"'+c+'","downloadUrl":"'+f+'","appName":"'+a+'","version":"'+b+'"}]';cef.param=h;cef.appStore("downloadApp");g=g.parent().prev();downloadAnimation(g);if(event&&event.stopPropagation){event.stopPropagation()}else{window.event.cancelBubble=true}return false}function downloadAnimation(b){var a=cloneNode(b);b.css({visibility:"hidden"});a.addClass("buzz");window.setTimeout(function(){b.css({visibility:"visible"});doParabola(a)},700)}function doParabola(c){c.removeClass("buzz");c.addClass("trans");var b=document.documentElement.scrollTop;var a=new window.parent.Parabola({el:c,offset:[970,b+50],curvature:0.001,duration:700,callback:function(){c.removeClass("buzz");c.remove()},stepCallback:function(d,e){}});c.css({width:"0",height:"0",transform:"rotate(360deg)","-webkit-transform":"rotate(360deg)"});a.start()}function cloneNode(a){var d=a.clone(false);var b=a.offset().top;var c=a.offset().left;d.appendTo("body").css({position:"absolute",top:b,left:c,width:a.width(),height:a.height(),"z-index":200});return d}function appClick(f,b){var g=event||window.event;var c=g.srcElement||g.target;if(c.className!="appRealName"&&c.className!="appName"&&c.tagName!="IMG"){return}parent.document.getElementById("appSearch").value="";var d=$(f);if(d.parent().attr("class")=="left"){parent.global.appName=d.find(".appHotListName").text();parent.global.appIconUrl=d.find("img:first").attr("src");parent.global.appRaterCnt=d.find(".appHotListDev").find("span").text();parent.global.appId=f.id;parent.global.status=d.find(".download").text();parent.global.downloadUrl=d.find(".appHotListDev").attr("downloadUrl");parent.global.packageName=d.find(".download").attr("id");parent.global.appDev=d.find(".appHotListDev").attr("appDev");var i=parseInt(d.find(".appHotListDev").attr("score"),10);var a="";while(i--){a+='<img src="../images/score.png" />'}parent.global.appLevel=a;var h=parent.document.getElementById("myIframe");parent.global.refreshPage="detail/detail.html";$(h).attr("src",parent.global.refreshPage)}else{parent.global.appName=d.find(".appName").text();parent.global.appDev=d.find(".appDev").text();parent.global.appIconUrl=d.find("img:first").attr("src");parent.global.appLevel=d.find(".appScore").html();parent.global.appRaterCnt=d.find("span").text();parent.global.status=d.find(".download").text();var j=d.find(".appInfo");parent.global.downloadUrl=j.attr("downloadUrl");parent.global.packageName=d.find(".download").attr("id");parent.global.appVersion=j.attr("version");var h=parent.document.getElementById("myIframe");parent.getAppDetail(b);parent.global.refreshPage="detail/detail.html";$(h).attr("src",parent.global.refreshPage)}parent.addHistoryEvent()}document.onkeydown=check;function check(b){var a;if(!b){var b=window.event}if(b.keyCode){a=b.keyCode}else{if(b.which){a=b.which}}if(((event.keyCode==8)&&((event.srcElement.type!="search"&&event.srcElement.type!="text"&&event.srcElement.type!="textarea"&&event.srcElement.type!="password")||event.srcElement.readOnly==true))||((event.ctrlKey)&&((event.keyCode==78)||(event.keyCode==82)))||(event.keyCode==116)){event.keyCode=0;event.returnValue=false}return true};