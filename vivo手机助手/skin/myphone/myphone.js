var myphone=new function(){};$(document).ready(function(){welcome.getAds();localStorage.usblink=1;$(".phoneInner,.phoneSd,.phoneEx").hover(function(){$(this).find(".phoneMemoryName").show()},function(){$(this).find(".phoneMemoryName").hide()});$("#phoneMenuCut").hover(function(){global.remHover=true;$("#phoneCutMenu").show()},function(){setTimeout(function(){if(global.remHover){$("#phoneCutMenu").hide()}},100)});$("#phoneCutMenu").hover(function(){global.remHover=false},function(){global.remHover=false;$(this).hide()})});window.connectHelpDlg={};welcome.initLayout=function(){var b=0;var d=0;if(window.innerWidth){b=window.innerWidth}else{if((document.body)&&(document.body.clientWidth)){b=document.body.clientWidth}}if(window.innerHeight){d=window.innerHeight}else{if((document.body)&&(document.body.clientHeight)){d=document.body.clientHeight}}var n=0;var a=0;var c=0;var f=$("#banner");var h=$("#staticBanner");var l=$("#toolCenter");var j=$("#myphone");var g=j.width();var k=$("#myphoneCenter").height();a=(d-k)/2;if(global.isLink){n=b-g}else{n=b}if(n<972){n=684;c=342;h.hide();f.css("top","0px")}else{n=972;c=486;if(b==978){a=4}h.show();f.css("top","-300px")}var m=n-30;var e=c-15;l.css({width:m+"px","margin-left":"-"+e+"px"});$("#welcomeAd").css({top:a+"px"});a=a+300;var i=$("#tool");if(i.is(":visible")){$("#tool").css({top:a+"px"})}$("#welcomeCon").css({top:a+"px"});myphone.initToolLayout();welcome.resetAd()};window.onresize=welcome.initLayout;document.oncontextmenu=new Function("return false;");var global={refreshTime:0,adsInit:true,isLink:false,stopPlay:false,clickPlayNum:1,remHover:true};welcome.refreshDevice=function(a){$.ajax({url:"http://vivozs/myPhone",type:"REFRESHDEVICE",data:a,success:function(b){},error:function(){myPhone.showError()}})};welcome.getAds=function(){welcome.resetAd()};welcome.resetAd=function(){if(global.adsInit){$.ajax({url:"http://vivozs/myPhone",type:"GETADS",success:function(k){if(k==""||k=="0"){return}if(typeof k=="string"){k=JSON.parse(k)}var a=$("#staticBanner");var e=$("#banner");var g=k.length;var f="",b="",h="";var c=0;for(var d=0;d<g;d++){b=k[d]["order"];h=k[d]["type"];f="<img onclick=\"myphone.ads('"+b+'\')" src="'+k[d]["url"]+'"/>';if(h=="2"){a.find("#s_max").html(f);e.find("#b_max1").html(f)}else{if(h=="3"){e.find("#b_max2").html(f)}else{if(h=="1"){if(c==0){a.find("#s_min1").html(f);e.find("#b_min1").html(f)}else{if(c==1){a.find("#s_min2").html(f);e.find("#b_min2").html(f)}else{if(c==2){a.find("#s_min3").html(f);e.find("#b_min3").html(f)}else{if(c==3){a.find("#s_min4").html(f);e.find("#b_min4").html(f)}}}}c++}}}}e.unslider({speed:500,delay:3000,complete:function(){},keys:true,dots:true,fluid:false});global.adsInit=false},error:function(){myPhone.showError()}})}};function updatePhoneInfo(e,f,j,c,k,b,i,g,a){$("#linkType").removeClass("wifiIcon").addClass("usbIcon");$("#phoneName").text(f);$("#phoneName").attr("deviceid",e);var d=parseInt(c)/2;var m=parseInt(k)/2;var h=$("#phoneImg");h.css({"background-image":"url('"+j+"')",width:c+"px",height:k+"px","margin-left":"-"+d+"px","margin-top":"-"+m+"px"});$("#phoneImgStatus").css({width:b+"px",height:i+"px","margin-left":g+"px","margin-top":a+"px"});if(localStorage.usblink=="0"){$("#pImg").remove()}welcome.conSuccess(1000)}function updateScreen(g,c,a,e,d){if(g==""){f=$("#phoneImgStatus");f.find("#phoneImgStatusTxt").html('<img src="images/phoneImgErr.png" /><span>{{myphone_js_refersh_false_lang}}</span>');setTimeout(function(){f.fadeOut()},1000);console.log("clickPlayNum:"+global.clickPlayNum);return}var f=$("#phoneImg");g=g+"?"+new Date().getTime();var b=new Image();b.src=g;b.onload=function(){b.width=c;b.id="pImg";b.height=a;b.style.marginTop=d+"px";b.style.marginLeft=e+"px";f=document.getElementById("phoneImg");$("#pImg").remove();f.appendChild(b);if(global.stopPlay){return}f=$("#phoneImgStatus");f.find("#phoneImgStatusTxt").html('<img src="images/phoneImgOk.png" /><span>{{myphone_js_refersh_success_lang}}</span>');setTimeout(function(){f.fadeOut()},1000)}}welcome.conSuccess=function(a){$("#myphone").css("left","0px");$("#welcome").css("left","292px");$("#tool").show();$("#welcomeCon").hide();global.isLink=true;if(localStorage.usblink=="0"){$("#disableCapture").show()}else{$("#disableCapture").hide()}welcome.initLayout()};function connectFailed(c){var a="";var b=parseInt(c);switch(b){case -1:a="{{myphone_js_connectfailed_error1_part1_lang}}<br>{{myphone_js_connectfailed_error1_part2_lang}}";break;case -2:a="{{myphone_js_connectfailed_error2_part1_lang}}<br>{{myphone_js_connectfailed_error2_part2_lang}}";break;case -3:a="{{myphone_js_connectfailed_error3_part1_lang}}<br>1、{{myphone_js_connectfailed_error3_part2_lang}}; <br>2、{{myphone_js_connectfailed_error3_part3_lang}}";break;case -4:a="{{myphone_js_connectfailed_error4_part1_lang}}<br>1、{{myphone_js_connectfailed_error4_part2_lang}}; <br>2、{{myphone_js_connectfailed_error4_part3_lang}}。";break;case -5:a="{{myphone_js_connectfailed_error5_lang}}";break;default:a="{{myphone_js_connectfailed_default_error_lang}}";break}$("#wifiConLoading").hide();$("#wifiCon,#wifiConTitle").show();$("#wifiCode").val("");if(b==-3){art.dialog({id:"connectHelpDlg",title:"{{myphone_js_connectHelp_title_lang}}",content:'<div style="font-size:13px;"><div class="dialog">{{myphone_js_connectHelp_content_title_lang}}<br/><br/> 			1. {{myphone_js_connectHelp_content_first_lang}}<br/><br/> 			<img width="266" height="200" src="{{myphone_js_connectHelp_content_img_path_lang}}"/> <br/><br/>			2. {{myphone_js_connectHelp_content_second_lang}}<br/> 			3. {{myphone_js_connectHelp_content_third_lang}}<br/><br/> 				{{myphone_js_connectHelp_content_addition_lang}}</div>',okValue:"{{myphone_js_connectHelp_ok_lang}}",ok:function(){myphone.closeDlg(true);return true},focus:true,cancel:false,dblclickNotHide:true,lock:true,padding:"10px 25px"})}else{myphone.openDlg(a)}}function installDeviceFailed(c){var a="{{myphone_js_installfial_driver_lang}}（"+c+'），{{myphone_js_installfail_plecheck_lang}}<br><a href="http://zs.vivo.com.cn/problem.php#installDevice" style="color:#0161c2;" target="_blank">{{myphone_js_installfail_how_lang}}</a>。';$("#wifiConLoading").hide();$("#wifiCon,#wifiConTitle").show();$("#wifiCode").val("");var b=$("#usbLink");b.find(".usbLinkDiv").hide();b=b.find("#conOk");b.show();myphone.openDlg(a)}function devicePushOut(a){localStorage.disConnect="1"}function conNotify(d){var b=parseInt(d);if(localStorage.usblink==0){if(b==0){myphone.openDlg("{{myphone_js_conNotify_wifi_connectclosed_lang}}")}}else{if(b==0){myphone.openDlg("{{myphone_js_conNotify_usb_connectclosed_lang}}");if(!global.clickPlayNum){var c=$("#phoneImgStatus");var a=$("#phoneMenuPlay");global.clickPlayNum=1;a.removeClass("phoneMenuPlayOn");a=a.next();a.removeClass("refreshDisable");a.removeAttr("disabled")}}}if(localStorage.usblink=="0"){$("#wifiConLoading").hide();$("#wifiCon,#wifiConTitle").fadeIn();if(b==0){myphone.changeDevice()}}else{myphone.changeDevice()}}welcome.conUsbBegin=function(a){localStorage.usblink=1;localStorage.autoCon=a;welcome.openStyle(1);$("#usbLink").show().css("top","0");welcome.conShowStatus("{{myphone_js_conUsbBegin_note_lang}}");a=""+a;welcome.refreshDevice(a)};welcome.openOrCloseWifi=function(a){if($(a).hasClass("disable")){return}else{$(a).addClass("disable");setTimeout(function(){$(a).removeClass("disable")},1000);if($(a).hasClass("wifiClose")){welcome.openStyle(0)}else{welcome.openStyle(1);$("#wifiLink").show().css("top","0")}}};welcome.openOrCloseUsb=function(a){if($(a).hasClass("disable")){return}else{$(a).addClass("disable");setTimeout(function(){$(a).removeClass("disable")},1000);if($(a).hasClass("usbClose")){welcome.openStyle(0)}else{welcome.openStyle(1);$("#usbLink").show().css("top","0");if(!$("#conLoading").is(":visible")){welcome.conUsbBegin(1)}}}};welcome.sureWifiCon=function(){welcome.openStyle(1);$("#wifiLink").show().css("top","0");$("#wifiConLoading").hide();$("#wifiCon,#wifiConTitle").show()};welcome.openStyle=function(a){if(a){$("#welcomeConL").animate({"margin-left":"-439px"},1000,function(){$(this).find("#usbOpen").addClass("usbClose")});$("#welcomeConR").animate({"margin-right":"-439px"},1000,function(){$(this).find("#wifiOpen").addClass("wifiClose")})}else{$("#welcomeConL").animate({"margin-left":"0px"},1000,function(){$(this).find("#usbOpen").removeClass("usbClose");$("#wifiLink").hide();$("#usbLink").hide()});$("#welcomeConR").animate({"margin-right":"0px"},1000,function(){$(this).find("#wifiOpen").removeClass("wifiClose")})}};function conStatus(b){myphone.closeDlg(false);localStorage.autoCon=1;welcome.openStyle(1);$("#usbLink").show().css("top","0");var a="";if(b=="0"){a="{{myphone_conStatus_state0_lang}}"}else{if(b=="1"){a="{{myphone_conStatus_state1_lang}}"}else{if(b=="2"){a="{{myphone_conStatus_state2_lang}}"}else{if(b=="3"){a="{{myphone_conStatus_state3_lang}}"}else{if(b=="4"){a="{{myphone_conStatus_state4_lang}}"}}}}}welcome.conShowStatus(a)}function conDiveList(g){if(g==""){welcome.conShowError();return}welcome.openStyle(1);$("#usbLink").show().css("top","0");if(typeof g=="string"){g=JSON.parse(g)}var h=0;var d=g.length;var f="";var i="",e="";var b=0;var a="";if(d==1){a=g[h]["deviceId"];a=a.replace(/(^\s*)|(\s*$)/g,"");if(a==""){localStorage.autoCon=0}}var c={list:g};f=template("devices_template",c);welcome.conShowDeviceList(f,d)}myphone.connectHelp=function(a,b){art.dialog({id:"connectHelpDlg",title:"{{myphone_js_connectHelp_title_lang}}",content:'<div style="font-size:13px;"><div class="dialog">{{myphone_js_connectHelp_content_title_lang}}<br/><br/> 			1. {{myphone_js_connectHelp_content_first_lang}}<br/><br/> 			<img width="266" height="200" src="{{myphone_js_connectHelp_content_img_path_lang}}"/> <br/><br/>			2. {{myphone_js_connectHelp_content_second_lang}}<br/> 			3. {{myphone_js_connectHelp_content_third_lang}}<br/><br/> 				{{myphone_js_connectHelp_content_addition_lang}}</div>',okValue:"{{myphone_js_connectHelp_ok_lang}}",ok:function(){return true},focus:true,cancel:false,dblclickNotHide:true,lock:true,padding:"10px 25px"})};connectHelpDlg.refreshDevices=function(b,a){art.dialog.get(b).close();welcome.conUsbBegin(0)};connectHelpDlg.InstallDriver=function(b,a,c){art.dialog.get(b).close();myphone.switchPhone(a,c)};myphone.switchPhone=function(a,b){if(b){welcome.conSuccess(0)}else{$.ajax({url:"http://vivozs/myPhone",type:"CHANGEDEVICE",data:a,success:function(c){},error:function(){myPhone.showError()}})}};function deviceMemory(f,a,c,h,b,k,d,i,e,j,g){$(".phoneSd").hide();$(".phoneEx").hide();j=Number(j);if(g=="0"){$("#systemMmName").text("{{system_data}}");$("#sdMmName").text("{{phone_u_storage_lang}}")}else{$("#systemMmName").text("{{phone_system_data}}");$("#sdMmName").text("{{phone_storage_lang}}")}if(j===1){$("#phoneInnerInfo").text(a);$("#phoneInnerPro").width(c+"%");$(".phoneInner").css({right:"0%"})}else{if(j===3){$(".phoneSd").show();$(".phoneEx").show();$("#phoneInnerInfo").text(a);$("#phoneInnerPro").width(c+"%");$("#phoneSdInfo").text(b);$("#phoneSdPro").width(k+"%");$("#phoneExInfo").text(i);$("#phoneExPro").width(e+"%");$(".phoneInner").css({right:"68%"});$(".phoneSd").css({left:"34%",right:"34%"});$(".phoneEx").css({left:"68%",right:"0%"})}else{$("#phoneInnerInfo").text(a);$("#phoneInnerPro").width(c+"%");$(".phoneInner").css({right:"51%"});if(h){$(".phoneSd").show();$("#phoneSdInfo").text(b);$("#phoneSdPro").width(k+"%");$(".phoneSd").css({left:"51%",right:"0%"})}else{if(d){$(".phoneEx").show();$("#phoneExInfo").text(i);$("#phoneExPro").width(e+"%");$(".phoneSd").css({left:"51%",right:"0%"})}}}}}welcome.conShowStatus=function(a){if(localStorage.usblink=="1"){var c=$("#usbLink");c.find(".usbLinkDiv").hide();c=c.find("#conLoading");c.show();c.find("#usbLoadingTxt").text(a)}else{var b=$("#wifiLink");b.find("#wifiConTitle").hide();b.find("#wifiCon").hide();b=b.find("#wifiConLoading");b.show();b.find("#wifiLoadingTxt").text(a)}};welcome.conShowError=function(){var a=$("#usbLink");a.find(".usbLinkDiv").hide();a.find("#conError").show()};welcome.conShowDeviceList=function(b,a){if(localStorage.autoCon==0||a>=1){var c=$("#usbLink");c.find(".usbLinkDiv").hide();c=c.find("#conOk");c.show();c.find("#conPhoneList").html(b)}if(a<1){$("#promptDlg").fadeOut()}};welcome.conWifiBegin=function(){var a=$("#wifiCode").val();a=a.replace(/\s+/g,"");len=a.length;if(len!=8){$("#wifiCode").val("");myphone.openDlg("{{myphone_js_welcom_wifibegin_sorry_lang}}");return}localStorage.usblink=0;$("#wifiCon,#wifiConTitle").hide();$("#wifiConLoading").fadeIn();welcome.conShowStatus("{{myphone_js_welcom_wifibegin_doing_lang}}");$.ajax({url:"http://vivozs/myPhone",type:"WIFICON",data:a,success:function(b){},error:function(){myPhone.showError()}})};welcome.openUsb=function(d){$("#usbDebug").css("top","0px");var c=$("#promptCenterUSBGallery").find(".promptCenterMList[class~=Horizontal]>.promptCenterMItem");var b=c.first().outerWidth(true)*c.length;var a=$("#promptCenterUSBGallery .promptCenterMList[class~=Horizontal]");a.width(b);a.css("left",0);if(c.length>1){$("#promptCenterUSBGallery .arrow_right").css("visibility","visible")}else{$("#promptCenterUSBGallery .arrow_right").css("visibility","hidden")}$("#promptCenterUSBGallery .arrow_left").css("visibility","hidden")};welcome.closeUsb=function(a){$("#usbDebug").css("top","-100%")};welcome.openGetWifiCode=function(d){$("#getWifiCode").css("top","0px");var c=$("#promptCenterWifiGallery").find(".promptCenterMList[class~=Horizontal]>.promptCenterMItem");var b=c.first().outerWidth(true)*c.length;var a=$("#promptCenterWifiGallery .promptCenterMList[class~=Horizontal]");a.width(b);a.css("left",0);if(c.length>4){$("#promptCenterWifiGallery .arrow_right").css("visibility","visible")}else{$("#promptCenterWifiGallery .arrow_right").css("visibility","hidden")}$("#promptCenterWifiGallery .arrow_left").css("visibility","hidden")};welcome.closeGetWifiCode=function(a){$("#getWifiCode").css("top","-100%")};myphone.changeDevice=function(){$("#myphone").css("left","-290px");$("#welcome").css("left","0px");$("#tool").hide().css("top","100%");$("#welcomeCon").show();global.isLink=false;welcome.initLayout();if(localStorage.usblink=="1"){welcome.conUsbBegin(0)}else{$("#wifiConLoading").hide();$("#wifiCon,#wifiConTitle").fadeIn()}};myphone.prompt=function(a,b){b=b||window.event;var c=getLocale(b);var d=$("#prompt");d.css({top:c.y+20+"px",left:c.x+15+"px"});d.text(a);d.show()};function getLocale(a){if(a.pageX||a.pageY){return{x:a.pageX,y:a.pageY}}return{x:a.clientX+document.body.scrollLeft-document.body.clientLeft,y:a.clientY+document.body.scrollTop-document.body.clientTop}}myphone.initToolLayout=function(){var c=$("#phoneToolList");var b=c.width();c=c.find("li:visible");var a=c.length;if(b<700&&a>8){c.width("72")}else{c.width("80")}};myphone.phoneMenu=function(c,b){if(c=="cut"){$.ajax({url:"http://vivozs/myPhone",type:"CUTIMG",data:b,success:function(e){},error:function(){myPhone.showError()}})}else{if(c=="refresh"){var d=$("#phoneImgStatus");d.find("#phoneImgStatusTxt").html('<img src="images/phoneImgLoading.gif" /><span>{{myphone_js_phonemenu_refershing_lang}}</span>');d.fadeIn();myphone.ajax("REFRESHIMG")}else{if(c=="play"){var d=$("#phoneImgStatus");global.stopPlay=true;var a=$("#phoneMenuPlay");if(global.clickPlayNum){global.clickPlayNum=0;a.addClass("phoneMenuPlayOn");a=a.next();a.addClass("refreshDisable");a.attr("disabled","true");d.find("#phoneImgStatusTxt").html('<img src="images/phoneImgOk.png" /><span>{{myphone_js_phonemenu_palying_lang}}!</span>')}else{global.clickPlayNum=1;a.removeClass("phoneMenuPlayOn");a=a.next();a.removeClass("refreshDisable");a.removeAttr("disabled");d.find("#phoneImgStatusTxt").html('<img src="images/phoneImgOk.png" /><span>{{myphone_js_phonemenu_played_lang}}!</span>')}d.show();$.ajax({url:"http://vivozs/myPhone",type:"PLAYIMG",success:function(e){setTimeout(function(){d.fadeOut(500,function(){global.stopPlay=false})},2000)},error:function(){myPhone.showError()}})}else{if(c=="full"){myphone.ajax("FULLIMG")}}}}};myphone.tool=function(a){if(a=="about"){myphone.ajax("ABOUT")}else{if(a=="mess"){myphone.ajax("MESS")}else{if(a=="clip"){myphone.ajax("CLIP")}else{if(a=="file"){myphone.ajax("FILE")}else{if(a=="rom"){myphone.ajax("ROM")}else{if(a=="apk"){myphone.ajax("APK")}else{if(a=="restore"){myphone.ajax("RESTORE")}else{if(a=="backup"){myphone.ajax("BACKUP")}else{if(a=="upgrade"){myphone.ajax("UPGRADE")}else{if(a=="gbackuprestore"){myphone.ajax("GBACKUPRESTORE")}}}}}}}}}}};myphone.ajax=function(a){$.ajax({url:"http://vivozs/myPhone",type:a,success:function(b){if(b==="busy"){if(a==="BACKUP"){myphone.openDlg("{{myphone_js_backup_note_lang}}")}else{if(a==="RESTORE"){myphone.openDlg("{{myphone_js_restore_note_lang}}")}}}},error:function(){myPhone.showError()}})};function updateToolRom(a){if(a=="1"){$("#rom").show()}else{$("#hide").show()}myphone.initToolLayout()}function updateToolUpgrade(a){if(a=="1"){$("#upgradeNew").show()}else{$("#upgradeNew").hide()}myphone.initToolLayout()}myphone.ads=function(a){$.ajax({url:"http://vivozs/myPhone",type:"ADS",data:a,success:function(b){},error:function(){myPhone.showError()}})};$(".arrow_left").click(function(){var c=$(this);var d=c.attr("id");if(d=="wifi_arrow_left"){var a=$("#promptCenterWifiGallery .promptCenterMList[class~=Horizontal]");if(a.css("left")>=0){c.css("visibility","hidden")}else{if(!a.is(":animated")){var b=$("#promptCenterWifiGallery").find(".promptCenterMItem").first().outerWidth(true);a.animate({left:parseInt(a.css("left"))+b},function(){if(parseInt(a.css("left"))>=0){c.css("visibility","hidden")}if($("#wifi_arrow_right").css("visibility")=="hidden"){$("#wifi_arrow_right").css("visibility","visible")}})}}}else{if(d=="usb_arrow_left"){var a=$("#promptCenterUSBGallery .promptCenterMList[class~=Horizontal]");if(a.css("left")>=0){c.css("visibility","hidden")}else{if(!a.is(":animated")){var b=$("#promptCenterUSBGallery").find(".promptCenterMItem").first().outerWidth(true);a.animate({left:parseInt(a.css("left"))+b},function(){if(parseInt(a.css("left"))>=0){c.css("visibility","hidden")}if($("#usb_arrow_right").css("visibility")=="hidden"){$("#usb_arrow_right").css("visibility","visible")}})}}}}});$(".arrow_right").click(function(){var c=$(this);var d=c.attr("id");if(d=="wifi_arrow_right"){var a=$("#promptCenterWifiGallery .promptCenterMList[class~=Horizontal]");if(a.css("left")<=-1*a.width()){c.css("visibility","hidden")}else{if(!a.is(":animated")){var b=$("#promptCenterWifiGallery").find(".promptCenterMItem").first().outerWidth(true);a.animate({left:parseInt(a.css("left"))-b},function(){if(parseInt(a.css("left"))<=-1*(a.width()-4*b)){c.css("visibility","hidden")}if($("#wifi_arrow_left").css("visibility")=="hidden"){$("#wifi_arrow_left").css("visibility","visible")}})}}}else{if(d=="usb_arrow_right"){var a=$("#promptCenterUSBGallery .promptCenterMList[class~=Horizontal]");if(a.css("left")<=-1*a.width()){c.css("visibility","hidden")}else{if(!a.is(":animated")){var b=$("#promptCenterUSBGallery").find(".promptCenterMItem").first().outerWidth(true);a.animate({left:parseInt(a.css("left"))-b},function(){if(parseInt(a.css("left"))<=-1*(a.width()-4*b)){c.css("visibility","hidden")}if($("#usb_arrow_left").css("visibility")=="hidden"){$("#usb_arrow_left").css("visibility","visible")}})}}}}});function promptCenterMItem(d,c,a){var b={numImage:d,text:c,stepClass:a};return b}myphone.closeDlg=function(a){$(".coverScreen").fadeOut();if(a){welcome.conUsbBegin(0)}};myphone.openDlg=function(a){$("#contentText").html(a);$("#promptDlg").fadeIn()};myphone.showError=function(){console.log("{{myphone_js_showerror_lang}}")};function showSystemUpgrade(a){if(a==="1"){$("#upgrade").show()}else{if(a==="0"){$("#upgrade").hide()}}};